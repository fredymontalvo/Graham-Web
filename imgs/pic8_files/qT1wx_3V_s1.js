;/*FB_PKG_DELIM*/

__d("VideoPlayerWithThumbnail.react",["CometImage.react","CometVisualCompletionAttributes","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useEffect,l=b.useState,m={root:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",boxSizing:"x9f619",display:"x78zum5",end:"xds687c",left:null,right:null,justifyContent:"xl56j7k",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0},thumbnail:{height:"x5yr21d",width:"x14atkfc",$$css:!0}};function a(a){var b=a.onLoad,e=a.src;a=a.thumbnailStyle;var f=(i||(i=d("VideoPlayerHooks"))).useVideoPlaybackEnded(),g=i.usePaused(),h=l(!1),n=h[0],o=h[1];k(function(){g||o(!0)},[g]);return!f&&n?null:j.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x1ey2m1c x9f619 x78zum5 xds687c xl56j7k x10l6tqk x17qophe x13vifvy"},c("CometVisualCompletionAttributes").IGNORE,{children:j.jsx(c("CometImage.react"),{onLoad:b,src:e,xstyle:[m.thumbnail,a]})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisSponsoredStoryMediaImpressionLogger",["InstagramAdImpressionFalcoEvent","InstagramAdSubImpressionFalcoEvent","InstagramODS","PolarisMonitorErrors","PolarisNavChain","PolarisReactRedux","PolarisSponsoredStoryLoggingConstants","cometGHLContentDisplayCheck","cr:6627","err","polarisStorySelectors","qex","setTimeout","usePartialViewImpression","usePolarisSponsoredStoryLoggingParams"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qex")._("1229"),i=new Map(),j=new Set();function a(a,e,f){var g=d("PolarisReactRedux").useSelector(function(b){return d("polarisStorySelectors").getReel(b,a)});g=c("usePolarisSponsoredStoryLoggingParams")(g,e);var k=g.adId,l=g.adInsertedPosition,m=g.containerModule,n=g.followStatus,o=g.mediaType,p=g.mpk,q=g.postedAt,r=g.reelSize,s=g.reelType,t=g.reelViewerPosition,u=g.sessionReelCounter,v=g.trackingToken,w=g.traySession,x=g.viewerId,y=g.viewerSession;return c("usePartialViewImpression")({onImpressionStart:function(g){var z=g.entry;if(k==null||v==null||x==null){if(e.isSponsored===!0){g=c("err")("Missing critical logging field for InstagramAdImpressionFalcoEvent for story media.");d("PolarisMonitorErrors").logError(g)}return}var A=i.get(e.id),B=Date.now(),C={a_pk:e.ownerId,ad_id:k,ad_inserted_position:l,follow_status:n,m_pk:p,m_t:o,m_ts:q,nav_chain:(g=c("PolarisNavChain").getInstance())==null?void 0:g.getNavChainForSend(),pigeon_reserved_keyword_module:m,pk:x,post_id:e.id,reel_id:a,reel_position:f.toString(),reel_size:r,reel_type:s,reel_viewer_position:t,session_reel_counter:u,source_of_action:m,tracking_token:v,tray_session_id:w,viewer_session_id:y},D=[JSON.stringify({is_sponsored:!0,m_pk:p,tracking_token:v})];if(j.has(e.id))return;j.add(e.id);c("setTimeout")(function(){var a=c("cometGHLContentDisplayCheck")(z.target);A==null?a?(c("InstagramODS").incr("web.ads.story.media.impression"),c("InstagramAdImpressionFalcoEvent").log(function(){return C}),h===!0&&b("cr:6627")!=null&&b("cr:6627").log(function(){return{container_module:m,event:"impression_client",tracking:D}}),i.set(e.id,B)):c("InstagramODS").incr("web.ads.story.media.impression.hidden"):B-A>=d("PolarisSponsoredStoryLoggingConstants").SUB_IMPRESSION_GAP&&(a?(c("InstagramODS").incr("web.ads.story.media.sub_impression"),c("InstagramAdSubImpressionFalcoEvent").log(function(){return C}),h===!0&&b("cr:6627")!=null&&b("cr:6627").log(function(){return{container_module:m,event:"sub_impression_client",tracking:D}}),i.set(e.id,B)):c("InstagramODS").incr("web.ads.story.media.sub_impression.hidden"));j["delete"](e.id)},d("PolarisSponsoredStoryLoggingConstants").ADBLOCK_CHECK_DELAY)}})}g["default"]=a}),98);
__d("usePolarisSponsoredStoryMediaTimeSpentLogger",["InstagramAdTimeSpentFalcoEvent","InstagramODS","PolarisContainerModuleUtils","PolarisMonitorErrors","PolarisReactRedux","PolarisStoriesLoggingUtils","PolarisViewpointActionUtils","err","nullthrows","polarisRelationshipSelectors","polarisStorySelectors","usePartialViewImpression","usePolarisAnalyticsContext","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function a(a,b,e,f){var g,i=c("usePolarisViewer")(),j=(g=d("PolarisReactRedux")).useSelector(function(b){return d("polarisStorySelectors").getReel(b,a)}),k=g.useSelector(d("polarisStorySelectors").getStoriesContent),l=k.traySession,m=g.useSelector(function(a){return a.stories.viewerSession}),n=g.useSelector(function(b){return b.stories.currentTrayOrder.indexOf(a)});g=d("polarisRelationshipSelectors").useRelationship((k=b.ownerId)!=null?k:"");var o=g!=null?d("PolarisViewpointActionUtils").getFollowStatus(g):null,p=c("usePolarisAnalyticsContext")(),q=d("PolarisViewpointActionUtils").getMPKForStoryMedia(b.id,b.owner);return c("usePartialViewImpression")({onImpressionEnd:function(){var g;if((f==null?void 0:f.ad_id)==null||(f==null?void 0:f.tracking_token)==null||o==null||q==null){if(b.isSponsored===!0){var k=c("err")("Missing critical logging field for InstagramAdTimeSpentFalcoEvent.");d("PolarisMonitorErrors").logError(k)}return}k=d("PolarisStoriesLoggingUtils").StoriesLoggingSession.getData();var r=h.get(b.id),s=Date.now();if(r==null){var t=c("err")("Missing logs for story media impression on start");d("PolarisMonitorErrors").logError(t);return}t=d("PolarisContainerModuleUtils").getContainerModule(p);var u={a_pk:b.ownerId,ad_id:f==null?void 0:f.ad_id,ad_inserted_position:n.toString(),follow_status:c("nullthrows")(o),m_pk:c("nullthrows")(d("PolarisViewpointActionUtils").getMPKForStoryMedia(b.id,b.owner)),m_t:Number(d("PolarisStoriesLoggingUtils").getMediaTypeFromPost(b)).toString(),m_ts:(g=b.postedAt)==null?void 0:g.toString(),pigeon_reserved_keyword_module:t,pk:i==null?void 0:i.id,post_id:b.id,reel_id:a,reel_position:e.toString(),reel_size:j==null?void 0:(g=j.itemIds)==null?void 0:g.length.toString(),reel_type:d("PolarisStoriesLoggingUtils").getTypeForLogging(j==null?void 0:j.type),reel_viewer_position:k.reelPositionInTray.toString(),session_reel_counter:k.reelCounter.toString(),source_of_action:t,timespent:(s-r)/1e3,tracking_token:c("nullthrows")(f==null?void 0:f.tracking_token),tray_session_id:l,viewer_session_id:m};c("InstagramODS").incr("web.ads.story.media.time_spent.end");c("InstagramAdTimeSpentFalcoEvent").log(function(){return u})},onImpressionStart:function(){if((f==null?void 0:f.ad_id)==null||(f==null?void 0:f.tracking_token)==null||o==null||q==null||(i==null?void 0:i.id)==null){if(b.isSponsored===!0){var a=c("err")("Missing critical logging field for InstagramAdTimeSpentFalcoEvent.");d("PolarisMonitorErrors").logError(a)}return}a=Date.now();c("InstagramODS").incr("web.ads.story.media.time_spent.start");h.set(b.id,a)}})}g["default"]=a}),98);
__d("usePolarisSponsoredStoryMediaViewabilityLogger",["InstagramAdViewabilityFalcoEvent","InstagramODS","PolarisContainerModuleUtils","PolarisMonitorErrors","PolarisReactRedux","PolarisStoriesLoggingUtils","PolarisViewpointActionUtils","err","polarisRelationshipSelectors","polarisStorySelectors","usePartialViewImpression","usePolarisAnalyticsContext","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function a(a,b,e,f){var g,i=c("usePolarisViewer")(),j=(g=d("PolarisReactRedux")).useSelector(function(b){return d("polarisStorySelectors").getReel(b,a)}),k=g.useSelector(function(a){return a.stories.viewerSession}),l=g.useSelector(function(b){return b.stories.currentTrayOrder.indexOf(a)});g=g.useSelector(d("polarisStorySelectors").getStoriesContent);var m=g.traySession;g=d("polarisRelationshipSelectors").useRelationship((g=b.ownerId)!=null?g:"");var n=g!=null?d("PolarisViewpointActionUtils").getFollowStatus(g):null,o=c("usePolarisAnalyticsContext")();return c("usePartialViewImpression")({onImpressionEnd:function(){if((f==null?void 0:f.ad_id)==null||(f==null?void 0:f.tracking_token)==null||(i==null?void 0:i.id)==null){if(b.isSponsored===!0){var g=c("err")("Missing critical logging field for InstagramAdViewabilityFalcoEvent.");d("PolarisMonitorErrors").logError(g)}return}g=d("PolarisStoriesLoggingUtils").StoriesLoggingSession.getData();var p=h.get(b.id),q=Date.now();if(p==null){var r=c("err")("Missing logs for story media viewability on start");d("PolarisMonitorErrors").logError(r);return}r=d("PolarisContainerModuleUtils").getContainerModule(o);var s={a_pk:b.ownerId,ad_id:f==null?void 0:f.ad_id,ad_inserted_position:l.toString(),duration:(q-p)/1e3,follow_status:n,m_pk:d("PolarisViewpointActionUtils").getMPKForStoryMedia(b.id,b.owner),m_t:Number(d("PolarisStoriesLoggingUtils").getMediaTypeFromPost(b)).toString(),m_ts:(q=b.postedAt)==null?void 0:q.toString(),pigeon_reserved_keyword_module:r,pk:i==null?void 0:i.id,post_id:b.id,reel_id:a,reel_position:e.toString(),reel_size:j==null?void 0:(p=j.itemIds)==null?void 0:p.length.toString(),reel_type:d("PolarisStoriesLoggingUtils").getTypeForLogging(j==null?void 0:j.type),reel_viewer_position:g.reelPositionInTray.toString(),session_reel_counter:g.reelCounter.toString(),source_of_action:r,tracking_token:(q=f==null?void 0:f.tracking_token)!=null?q:"",tray_session_id:m,viewer_session_id:k,visibility_unit:"feed_unit"};c("InstagramODS").incr("web.ads.story.media.viewability.end");c("InstagramAdViewabilityFalcoEvent").log(function(){return s})},onImpressionStart:function(){var a=Date.now();c("InstagramODS").incr("web.ads.story.media.viewability.start");h.set(b.id,a)}})}g["default"]=a}),98);
__d("usePolarisSponsoredStoryMediaVpvdImpressionLogger",["InstagramAdVpvdImpFalcoEvent","InstagramODS","PolarisContainerModuleUtils","PolarisMonitorErrors","PolarisReactRedux","PolarisStoriesLoggingUtils","PolarisViewpointActionUtils","err","polarisRelationshipSelectors","polarisStorySelectors","usePartialViewImpression","usePolarisAnalyticsContext","usePolarisSelector","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=new Map(),k=250;function a(a,b,e,f){var g=c("usePolarisViewer")(),l=d("PolarisReactRedux").useSelector(function(b){return d("polarisStorySelectors").getReel(b,a)}),m=c("usePolarisSelector")(d("polarisStorySelectors").getStoriesContent),n=m.traySession,o=d("PolarisReactRedux").useSelector(function(a){return a.stories.viewerSession}),p=d("PolarisReactRedux").useSelector(function(b){return b.stories.currentTrayOrder.indexOf(a)});m=d("polarisRelationshipSelectors").useRelationship((m=b.ownerId)!=null?m:"");var q=m!=null?d("PolarisViewpointActionUtils").getFollowStatus(m):null,r=c("usePolarisAnalyticsContext")(),s=d("PolarisViewpointActionUtils").getMPKForStoryMedia(b.id,b.owner);return c("usePartialViewImpression")({onImpressionEnd:function(){var m;if((f==null?void 0:f.ad_id)==null||(f==null?void 0:f.tracking_token)==null||q==null||s==null){if(b.isSponsored===!0){var t=c("err")("Missing critical logging field for InstagramAdVpvdImpFalcoEvent.");d("PolarisMonitorErrors").logError(t)}return}t=d("PolarisStoriesLoggingUtils").StoriesLoggingSession.getData();var u=h.get(b.id),v=Date.now();if(u==null){var w=c("err")("Missing logs for story media vpvd on start");d("PolarisMonitorErrors").logError(w);return}w=v-u;if(w<k)return;u=Math.max(w,(v=i.get(b.id))!=null?v:0);i.set(b.id,u);v=(v=j.get(b.id))!=null?v:0+w;j.set(b.id,v);var x=d("PolarisContainerModuleUtils").getContainerModule(r),y={a_pk:b.ownerId,ad_id:f==null?void 0:f.ad_id,ad_inserted_position:p.toString(),follow_status:q,m_pk:s,m_t:Number(d("PolarisStoriesLoggingUtils").getMediaTypeFromPost(b)).toString(),m_ts:(m=b.postedAt)==null?void 0:m.toString(),max_duration_ms:u.toString(),pigeon_reserved_keyword_module:x,pk:g==null?void 0:g.id,post_id:b.id,reel_id:a,reel_position:e.toString(),reel_size:l==null?void 0:(m=l.itemIds)==null?void 0:m.length.toString(),reel_type:d("PolarisStoriesLoggingUtils").getTypeForLogging(l==null?void 0:l.type),reel_viewer_position:t.reelPositionInTray.toString(),session_reel_counter:t.reelCounter.toString(),source_of_action:x,sum_duration_ms:v,timespent:w/1e3,tracking_token:(u=f==null?void 0:f.tracking_token)!=null?u:"",tray_session_id:n,viewer_session_id:o};c("InstagramODS").incr("web.ads.story.media.vpvd.end");c("InstagramAdVpvdImpFalcoEvent").log(function(){return y})},onImpressionStart:function(){if((f==null?void 0:f.ad_id)==null||(f==null?void 0:f.tracking_token)==null||q==null||s==null||(g==null?void 0:g.id)==null){if(b.isSponsored===!0){var a=c("err")("Missing critical logging field for InstagramAdVpvdImpFalcoEvent.");d("PolarisMonitorErrors").logError(a)}return}a=Date.now();c("InstagramODS").incr("web.ads.story.media.vpvd.start");h.set(b.id,a)}})}g["default"]=a}),98);
__d("InstagramAdReelImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3435");b=d("FalcoLoggerInternal").create("instagram_ad_reel_impression",a);e=b;g["default"]=e}),98);
__d("InstagramAdReelSubImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3436");b=d("FalcoLoggerInternal").create("instagram_ad_reel_sub_impression",a);e=b;g["default"]=e}),98);
__d("usePolarisSponsoredStoryReelImpressionLogger",["InstagramAdReelImpressionFalcoEvent","InstagramAdReelSubImpressionFalcoEvent","InstagramODS","PolarisContainerModuleUtils","PolarisMonitorErrors","PolarisReactRedux","PolarisSponsoredStoryLoggingConstants","PolarisStoriesLoggingUtils","PolarisViewpointActionUtils","cometGHLContentDisplayCheck","cr:6627","err","polarisRelationshipSelectors","polarisStorySelectors","qex","setTimeout","usePartialViewImpression","usePolarisAnalyticsContext","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qex")._("1229"),i=new Map(),j=new Set();function a(a,e,f){var g,k=c("usePolarisViewer")(),l=(g=d("PolarisReactRedux")).useSelector(function(a){return d("polarisStorySelectors").getReel(a,e)}),m=g.useSelector(function(a){return a.stories.currentReelItemIndex}),n=g.useSelector(d("polarisStorySelectors").getStoriesContent),o=n.traySession,p=g.useSelector(function(a){return a.stories.viewerSession}),q=g.useSelector(function(a){return a.stories.currentTrayOrder.indexOf(e)});g=d("polarisRelationshipSelectors").useRelationship((n=a.ownerId)!=null?n:"");var r=g!=null?d("PolarisViewpointActionUtils").getFollowStatus(g):null,s=c("usePolarisAnalyticsContext")(),t=f==null?void 0:f.ad_id;return c("usePartialViewImpression")({onImpressionStart:function(g){var n,u=g.entry;if(t==null||(f==null?void 0:f.tracking_token)==null||(k==null?void 0:k.id)==null){if(a.isSponsored===!0){g=c("err")("Missing critical logging field for InstagramAdReelImpressionFalcoEvent.");d("PolarisMonitorErrors").logError(g)}return}var v=i.get(e),w=Date.now();g=d("PolarisStoriesLoggingUtils").StoriesLoggingSession.getData();var x=d("PolarisContainerModuleUtils").getContainerModule(s),y=d("PolarisViewpointActionUtils").getMPKForStoryMedia(a.id,a.owner),z=f==null?void 0:f.tracking_token,A={a_pk:a.ownerId,ad_id:t,ad_inserted_position:q.toString(),follow_status:r,m_pk:y,m_t:Number(d("PolarisStoriesLoggingUtils").getMediaTypeFromPost(a)).toString(),m_ts:(n=a.postedAt)==null?void 0:n.toString(),pigeon_reserved_keyword_module:x,pk:k==null?void 0:k.id,post_id:a.id,reel_id:e,reel_position:m.toString(),reel_size:l==null?void 0:(n=l.itemIds)==null?void 0:n.length.toString(),reel_type:d("PolarisStoriesLoggingUtils").getTypeForLogging(l==null?void 0:l.type),reel_viewer_position:g.reelPositionInTray.toString(),session_reel_counter:g.reelCounter.toString(),source_of_action:x,tracking_token:z,tray_session_id:o,viewer_session_id:p},B=[JSON.stringify({is_sponsored:!0,m_pk:y,tracking_token:z})];if(j.has(t))return;j.add(t);c("setTimeout")(function(){var a=c("cometGHLContentDisplayCheck")(u.target);v==null?a?(c("InstagramODS").incr("web.ads.story.reel.impression"),c("InstagramAdReelImpressionFalcoEvent").log(function(){return A}),h===!0&&b("cr:6627")!=null&&b("cr:6627").log(function(){return{container_module:x,event:"reel_impression_client",tracking:B}}),i.set(e,w)):c("InstagramODS").incr("web.ads.story.reel.impression.hidden"):w-v>=d("PolarisSponsoredStoryLoggingConstants").SUB_IMPRESSION_GAP&&(a?(c("InstagramODS").incr("web.ads.story.reel.sub_impression"),c("InstagramAdReelSubImpressionFalcoEvent").log(function(){return A}),h===!0&&b("cr:6627")!=null&&b("cr:6627").log(function(){return{container_module:x,event:"reel_sub_impression_client",tracking:B}}),i.set(e,w)):c("InstagramODS").incr("web.ads.story.reel.sub_impression.hidden"));j["delete"](t)},d("PolarisSponsoredStoryLoggingConstants").ADBLOCK_CHECK_DELAY)}})}g["default"]=a}),98);
__d("PolarisSponsoredStoriesFooterCTA.react",["cx","InstagramODS","PolarisClickEventLoggerProvider.react","PolarisExternalLink.react","PolarisIGCoreText","PolarisReactRedux","PolarisStoryActions","PolarisTrackingNodeProvider.react","nullthrows","polarisStorySelectors","react","usePolarisOffsiteTrackingDataURLParams","usePolarisSelector"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.ctaUrl,e=a.isActive,f=a.isMobile;f=f===void 0?!1:f;a=a.text;var g=d("PolarisReactRedux").useDispatch(),h=function(){c("InstagramODS").incr("web.ads.story.link_click"),g(d("PolarisStoryActions").navigateFromStory())},i=c("usePolarisSelector")(function(a){return d("polarisStorySelectors").getTrayEntrypoint(a)});a=j.jsx("div",{className:"_adsy",children:j.jsx(c("PolarisIGCoreText"),{color:e?"web-always-black":"web-always-white",size:"body",textAlign:"center",weight:"semibold",children:a})});f=f?j.jsx("div",{className:"_9znl _ads_","data-testid":void 0}):null;var k=c("nullthrows")(d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getCurrentPostId)),l=c("nullthrows")(d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getCurrentPost));l=c("nullthrows")(l.owner).id;e=j.jsxs("div",{children:[f,j.jsx("div",{className:"_adt1"+(e?" _adt2":""),children:j.jsx(c("PolarisExternalLink.react"),{author_id:(f=l)!=null?f:"0",className:"_adtk","data-testid":void 0,href:b,media_pk:k,onClick:h,page_id:"StoriesPage",queryParams:c("usePolarisOffsiteTrackingDataURLParams")(b),target:"_blank",children:a})})]});return i==="story_ad_activity"?e:j.jsx(c("PolarisClickEventLoggerProvider.react"),{children:j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:86,children:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoriesIntegrityGuards.react",["CometPlaceholder.react","JSResourceForInteraction","PolarisReactRedux","PolarisStoriesProvider.react","lazyLoadComponent","nullthrows","polarisStorySelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisStoriesIntegrityGuards.react"));function a(){var a,b=c("nullthrows")(d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getCurrentPost)),e=d("PolarisStoriesProvider.react").useStoriesContext(),f=e.shareClickCount,g=e.updateStoriesContext;e=j(function(){return{media_id:b.id,module:"reel_feed_timeline"}},[b.id]);return i.jsx(i.Fragment,{children:f>0&&((a=b.sharingFrictionInfo)==null?void 0:a.bloksAppUrl)!=null&&i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(k,{appId:b.sharingFrictionInfo.bloksAppUrl,bridgeOverrides_DEPRECATED:{onOpenShareSheetClick:function(){g({isPlaybackDisabled:!0,isStoryShareSheetActive:!0,shareClickCount:0})},onResumeStoryPlayback:function(){g({shareClickCount:0})}},params:e},f)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisOrganicStoryImpression",["InstagramOrganicImpressionFalcoEvent","PolarisLoggerUtils","PolarisNavChain","PolarisStoriesLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set();function a(a,b,e,f,g){return function(i){if(h.has(b)===!0)return;if(i.state==="entered"){var j=d("PolarisStoriesLoggingUtils").StoriesLoggingSession.getData();c("InstagramOrganicImpressionFalcoEvent").log(function(){var h;return{m_pk:d("PolarisLoggerUtils").getFormattedMediaID(b,e||""),module_name:j.containermodule||"",nav_chain:(h=c("PolarisNavChain").getInstance())==null?void 0:h.getNavChainForSend(),pigeon_reserved_keyword_module:j.containermodule||"",reel_id:a,tray_session_id:f,viewer_session_id:g}})}h.add(b)}}g.makeOrganicStoryImpressionAction=a}),98);
__d("usePolarisStoryImpressionViewpointLogging",["PolarisOrganicStoryImpression","PolarisStoriesLoggingUtils","PolarisViewpointActionUtils","PolarisViewpointReact.react","PolarisVpvdImpressionAction","polarisStorySelectors","usePolarisAnalyticsContext","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=a.hasLoggedStoryPogImpression,f=a.post,g=a.reel,h=a.reelItemIndex;a=a.setHasLoggedStoryPogImpression;var i=c("usePolarisAnalyticsContext")(),j=c("usePolarisSelector")(d("polarisStorySelectors").getStoriesContent);j=j.traySession;var k=c("usePolarisSelector")(function(a){return a.stories.viewerSession}),l=c("usePolarisSelector")(d("polarisStorySelectors").getContainerModule);l=l.containerModule;b=(b=(b=d("PolarisStoriesLoggingUtils").StoriesLoggingSession.getData())==null?void 0:b.containermodule)!=null?b:l;l=d("PolarisViewpointActionUtils").getMPKForReel(g,h);l=d("PolarisVpvdImpressionAction").makeStoriesVpvdImpressionAction(g.id,l,h,j,k,i,b,e,a);i=g.id;a=(e=((b=g.itemIds)!=null?b:[])[h])!=null?e:"";b=i+a;h=[l];i=d("PolarisOrganicStoryImpression").makeOrganicStoryImpressionAction(g.id,f.id,(e=f.owner)==null?void 0:e.id,j,k);h.push(i);return d("PolarisViewpointReact.react").useViewpoint({action:h,id:b})}g["default"]=a}),98);
__d("PolarisStoryViewer.react",["PolarisReactRedux","PolarisStoriesIntegrityGuards.react","PolarisStoriesProvider.react","cr:4398","deferredLoadComponent","nullthrows","polarisPostSelectors","polarisStorySelectors","react","requireDeferred","usePolarisStoryImpressionViewpointLogging"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useEffect,k=e.useState,l=c("deferredLoadComponent")(c("requireDeferred")("PolarisStoryModals.react").__setRef("PolarisStoryViewer.react"));function a(a){var e=a.adImpressionRef,f=a.postId,g=a.reelId,h=a.reelItemIndex,m=a.viewerHeight,n=a.viewerWidth;a=c("nullthrows")(d("PolarisReactRedux").useSelector(function(a){return d("polarisStorySelectors").getReel(a,g)}));var o=k(!1),p=o[0],q=o[1];o=d("PolarisReactRedux").useSelector(function(a){return d("polarisPostSelectors").getPostById(a,f)});var r=d("PolarisStoriesProvider.react").useStoriesContext(),s=r.updateStoriesContext;j(function(){m!=null&&n!=null&&s({viewerHeight:m,viewerWidth:n})},[s,m,n]);j(function(){q(!1)},[g]);r=c("usePolarisStoryImpressionViewpointLogging")({hasLoggedStoryPogImpression:p,post:o,reel:a,reelItemIndex:h,setHasLoggedStoryPogImpression:q});return i.jsxs(i.Fragment,{children:[i.jsx(b("cr:4398"),{innerRef:o.isSponsored===!0&&e!=null?e:r,post:o,reel:a,reelItemIndex:h}),i.jsx(c("PolarisStoriesIntegrityGuards.react"),{}),i.jsx(l,{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisSponsoredStoryReelImpressionSecondChannelLogger",["InstagramODS","PolarisContainerModuleUtils","PolarisInteractionsLogger","PolarisSponsoredStoryLoggingConstants","PolarisViewpointActionUtils","cometGHLContentDisplayCheck","cr:6627","qex","setTimeout","usePolarisAnalyticsContext","usePolarisViewer","useScrollBasedImpressionTracker"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qex")._("1229"),i=new Map(),j=new Set();function a(a,e){var f=c("usePolarisAnalyticsContext")(),g=c("usePolarisViewer")(),k=a==null?void 0:a.ad_id,l=a==null?void 0:a.tracking_token,m=d("PolarisContainerModuleUtils").getContainerModule(f);return c("useScrollBasedImpressionTracker")(function(a){if(k!=null&&l!=null&&(g==null?void 0:g.id)!=null&&f!=null){if(a.status!=="ENTER")return;var n=i.get(k),o=Date.now(),p=d("PolarisViewpointActionUtils").getMPKForFeedMedia(e);({ad_id:k,container_module:d("PolarisContainerModuleUtils").getContainerModule(f),m_pk:p,m_t:d("PolarisInteractionsLogger").getMediaTypeFromPost(e).toString(),tracking_token:l});var q=[JSON.stringify({is_sponsored:!0,m_pk:p,trackingToken:l})];if(j.has(k))return;j.add(k);c("setTimeout")(function(){var e=c("cometGHLContentDisplayCheck")(a.target);n==null?e?(c("InstagramODS").incr("web.ads.story.reel.impression.second_channel"),h===!0&&b("cr:6627")!=null&&b("cr:6627").log(function(){return{container_module:m,event:"reel_impression_second_channel_client",tracking:q}}),i.set(k,o)):c("InstagramODS").incr("web.ads.story.reel.impression.second_channel.hidden"):o-n>=d("PolarisSponsoredStoryLoggingConstants").SUB_IMPRESSION_GAP&&(e?(c("InstagramODS").incr("web.ads.story.reel.sub_impression.second_channel"),h===!0&&b("cr:6627")!=null&&b("cr:6627").log(function(){return{container_module:m,event:"reel_sub_impression_second_channel_client",tracking:q}}),i.set(k,o)):c("InstagramODS").incr("web.ads.story.reel.sub_impression.second_channel.hidden"));j["delete"](k)},d("PolarisSponsoredStoryLoggingConstants").ADBLOCK_CHECK_DELAY)}})}g["default"]=a}),98);
__d("PolarisSponsoredStory.react",["PolarisAdsGatingHelpers","PolarisErrorBoundary.react","PolarisReactRedux","PolarisSponsoredStoryContext.react","PolarisStoryViewer.react","PolarisTrackingCodeProvider.react","PolarisViewpointActionUtils","polarisAdsSelectors","polarisRelationshipSelectors","qex","react","useMergeRefs","usePolarisAnalyticsContext","usePolarisPost","usePolarisSponsoredElTracker","usePolarisSponsoredPostProfileClickLogger","usePolarisSponsoredStoryReelImpressionLogger","usePolarisSponsoredStoryReelImpressionSecondChannelLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useEffect;e=c("qex")._("367");var l=e===!0?c("usePolarisSponsoredStoryReelImpressionSecondChannelLogger"):function(a,b){return null};function m(a){var b=a.postId,e=a.reelId,f=a.reelItemIndex,g=a.viewerHeight;a=a.viewerWidth;var h=d("polarisAdsSelectors").useStoryAdInfo(b,function(a){return a}),m=d("polarisAdsSelectors").useStoryAdPosition(e,function(a){return a}),n=d("usePolarisPost").usePost(b,function(a){return a}),o=n.owner,p=j(d("PolarisSponsoredStoryContext.react").PolarisSponsoredStoryContext),q=p.updateSponsoredStoryContext;p=c("usePolarisSponsoredStoryReelImpressionLogger")(n,e,h);var r=l(h,n);m=c("usePolarisSponsoredElTracker")({mediaType:0,position:(m=m)!=null?m:-2,postId:e,trackingToken:(m=h==null?void 0:h.tracking_token)!=null?m:""});var s=h==null?void 0:h.ad_id,t=h==null?void 0:h.tracking_token,u=d("PolarisReactRedux").useSelector(function(a){return d("polarisRelationshipSelectors").getRelationship(a.relationships,(a=(a=n.owner)==null?void 0:a.id)!=null?a:"")}),v=c("usePolarisAnalyticsContext")(),w=c("usePolarisSponsoredPostProfileClickLogger")(b,v,s,t,u),x=d("PolarisAdsGatingHelpers").enableProfileClickLoggingForIgWebStory();k(function(){q({onProfileClick:w,shouldLogProfileClicks:x})},[w,x,q]);v=c("useMergeRefs")(p,r,m);return i.jsx(c("PolarisTrackingCodeProvider.react"),{isSponsored:!0,m_pk:(s=d("PolarisViewpointActionUtils").getMPKForStoryMedia(b,o))!=null?s:"",trackingToken:(t=h==null?void 0:h.tracking_token)!=null?t:"",children:i.jsx(c("PolarisStoryViewer.react"),{adImpressionRef:v,postId:b,reelId:e,reelItemIndex:f,viewerHeight:g,viewerWidth:a})})}m.displayName=m.name+" [from "+f.id+"]";function a(a){return i.jsx(c("PolarisErrorBoundary.react"),{errorRenderer:function(a){return null},children:i.jsx(d("PolarisSponsoredStoryContext.react").PolarisSponsoredStoryContextProvider,{children:i.jsx(m,babelHelpers["extends"]({},a))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisSponsoredTextWidthUtils",[],(function(a,b,c,d,e,f){"use strict";var g=13,h="";function a(a,b,c,d){var e=0,f=a.length-1;while(e<=f){var g=Math.floor((e+f)/2),j=a.slice(0,g+1).join(h);i(j,b,c)<=d?e=g+1:f=g-1}return e}function i(a,b,c){var d=i.canvas=document.createElement("canvas");d=d.getContext("2d");if(d==null)return g;d.font=b;b=c!=null?a.replace(" ","").length*c:0;c=d.measureText(a);return c.width+b}f.getMaxWordIndexForWidth=a;f.getTextWidthForAdPreviewCaption=i}),66);
__d("PolarisSponsoredStoryCaptionUtils",["Locale","PolarisSponsoredTextWidthUtils","UnicodeBidi","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h=3e3,i="",j=80;function a(a,b){a=(a-b)/2;b=a-j;a=Math.max((a-j)/2,0);var c=a/2;return{captionOffset:c,maxCaptionHeight:b,mediaOffset:a}}function b(a){a=d("UnicodeBidi").isDirectionRTL(a);var b=d("Locale").isRTL(),c="";a&&!b?c="rtl":!a&&b&&(c="ltr");return c}function e(a,b,c,e,f,g,j){var k=[];b=b+"px "+c;c=[];var l=0,m=0;j!=null&&(b=j+" "+b);while(l<a.length||c.length>0){m++;if(m>h)throw new Error("something went wrong while rendering caption. please report this issue.");j=void 0;c.length>0?j=c:j=a[l];if(j.length===0){k.push("");l++;continue}var n=l===0&&c.length===0&&g!=null?f-g:f,o=d("PolarisSponsoredTextWidthUtils").getMaxWordIndexForWidth(j,b,e,n);if(o===0){n=d("PolarisSponsoredTextWidthUtils").getMaxWordIndexForWidth(Array.from(j[0]),b,e,n);var p=j[0].slice(0,n);k.push(p);n<j[0].length?c=[j[0].slice(n)].concat(j.slice(1,j.length)):c=j.slice(1,j.length)}else{p=j.slice(0,o).join(i);k.push(p);c=j.slice(o)}if(c.length>0)continue;l++}return k}function f(a){a=a.split(l).filter(function(a){return!c("isStringNullOrEmpty")(a)});var b=[];a.forEach(function(a){if(!a.startsWith("@")&&!a.startsWith("#")){var d=a.split(k).filter(function(a){return!c("isStringNullOrEmpty")(a)});d.forEach(function(a){return b.push(a)})}else b.push(a)});return b}var k=/((?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C])+|(?:(?:[\u0E01-\u0E3A\u0E40-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u1000-\u109F\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u19E0-\u19FF\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DB5\u4E00-\u9FEF\uA9E0-\uA9FE\uAA60-\uAA7F\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*))/,l=/([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)|(\B@[0-9A-Z_a-z]+(?:\.(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])[0-9A-Z_a-z]+)*)|(&?#(?:\\w)+)/;g.getSponsoredStoryCaptionMediaValues=a;g.getTextDirection=b;g.transformWordsListToInlineSentences=e;g.tokenizeCaption=f}),98);
__d("PolarisSponsoredStoryCaption.react",["fbt","PolarisSponsoredStoryCaptionUtils","PolarisSponsoredTextWidthUtils","PolarisStoriesProvider.react","filterNulls","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=" \u2026 ",l="",m="#FFF",n="#000",o=15,p=.5,q=1,r=350,s=120,t=150,u=h._("__JHASH__eyN3kALEX8n__JHASH__");function v(a){var b=a.captionStyle,c=a.inlineSentencesList,e=a.maxLines;a=a.maxWidth;var f=d("PolarisStoriesProvider.react").useStoriesContext(),g=f.updateStoriesContext;f=function(){g({isCaptionModalActive:!0})};var h=babelHelpers["extends"]({},b,{background:"none",border:"none",cursor:"pointer",opacity:.8,padding:0,position:"relative",textDecoration:"underline",zIndex:100}),i=b.fontSize+"px "+b.fontFamily,m=[];e>0&&c.length>e&&(m=c[e-1].split(l));var n=d("PolarisSponsoredTextWidthUtils").getTextWidthForAdPreviewCaption(k+u.toString(),i,b.letterSpacing);i=d("PolarisSponsoredTextWidthUtils").getMaxWordIndexForWidth(m,i,b.letterSpacing,a-n);a=m.slice(0,i).join(l);return j.jsxs("span",{children:[c.slice(0,e-1).map(function(a,c){return j.jsxs("span",{style:b,children:[a,j.jsx("br",{})]},c)}),j.jsxs("span",{style:b,children:[a,k,j.jsx("button",{onClick:f,style:h,children:u})]},"lastCaption")]})}v.displayName=v.name+" [from "+f.id+"]";function w(a,b){b=b*1.4;a=a!=null?Math.floor(a/b):q;return a<=0?1:a}function a(a){var b=a.caption,e=a.maxCaptionHeight,f=a.maxCaptionWidth,g=a.textBackgroundColor,h=a.textBackgroundColorAlpha,i=a.textColor;a=a.textSize;g=g!=null&&h!=null?g+h:n;i=(h=i)!=null?h:m;a=(h=a)!=null?h:o;h="Tahoma, Helvetica, Arial, sans-serif";var k=p;f=f>t?f-s:r;var l=700;e=w(e,a);var q={backgroundColor:g,borderRadius:"4px",color:i,fontFamily:h,fontSize:a,fontWeight:l,letterSpacing:k,lineHeight:"140%",padding:"2px 2px 5px 2px"};g=b.split("\n").map(d("PolarisSponsoredStoryCaptionUtils").tokenizeCaption);i=c("filterNulls")(d("PolarisSponsoredStoryCaptionUtils").transformWordsListToInlineSentences(g,a,h,k,f));b=d("PolarisSponsoredStoryCaptionUtils").getTextDirection((l=i[0])!=null?l:"");g=i.length>e;return j.jsx("div",{className:"x1cnzs8 x6x52a7 xx6bls6 xxpdul3 x1n2onr6","data-testid":void 0,dir:b,children:g?j.jsx(v,{captionStyle:q,inlineSentencesList:i,maxLines:e,maxWidth:f}):i.map(function(a,b){return j.jsxs("span",{style:q,children:[a,j.jsx("br",{})]},b)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryExpired.react",["cx","PolarisStoriesStrings","emptyFunction","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.eventZone,e=a.isFirstStory,f=a.onClose,g=a.onNext,h=a.onNextReel,i=a.onPrev;a=a.onPrevReel;var k=c("emptyFunction"),l=c("emptyFunction"),m=c("emptyFunction");return j.jsxs("div",{className:"_abwn",children:[j.jsx("p",{className:"_abwo",children:d("PolarisStoriesStrings").STORY_EXPIRED_TEXT}),j.jsx(b,{isFirstStory:e,isPlaying:!0,isVideo:!1,onClose:f,onNext:g,onNextReel:h,onPause:l,onPlay:k,onPrev:i,onPrevReel:a,onResume:m,showVideoPlayButton:!1,tappableStickersEligible:!1})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisNetworkInfo",[],(function(a,b,c,d,e,f){"use strict";function a(){var a=navigator;return a.connection||a.mozConnection||a.webkitConnection}f.getNavigatorConnection=a}),66);
__d("PolarisStoryAdDebugger.react",["polarisAdsSelectors","react","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.postId;a=d("polarisAdsSelectors").useStoryAdInfo(a,function(a){return a});var b=c("usePolarisSelector")(function(a){return a.ads.storyAdInjectionData}),e=c("usePolarisSelector")(function(a){return a.stories.currentTrayOrder.indexOf(a.stories.currentReelId)});return a?i.jsxs("div",{className:"x1qjc9v5 x1msgd8p x1g7gg9k xenha5r x1eoefnw x124h113 x1lcm9me x1yr5g0i xrt01vj x10y3i5r x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x178xt8z xm81vs4 xso031l xy80clv x9f619 x1awj2ng x78zum5 xdt5ytf x2lah0s x1c3i2sq xu06os2 xyamay9 x1pi30zi x1l90r2v x1swvt13 x11njtxf",children:[i.jsxs("p",{className:"x1gslohp x11i5rnm x12nagc x1mh8g0r",children:["Ad ID: ",a.ad_id]}),i.jsxs("p",{className:"x1gslohp x11i5rnm x12nagc x1mh8g0r",children:["Entry Point Index: ",b==null?void 0:b.entryPointIndex]}),i.jsxs("p",{className:"x1gslohp x11i5rnm x12nagc x1mh8g0r",children:["Ad Request Index: ",b==null?void 0:b.adRequestIndex]}),i.jsxs("p",{className:"x1gslohp x11i5rnm x12nagc x1mh8g0r",children:["Current Insertion Index: ",e]})]}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryMediaDebugger",["cx","PolarisNetworkInfo","PolarisStoryAdDebugger.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(a){var b=a.currentSrc,c=a.imageResources;a=a.videoResources;return j.jsxs(j.Fragment,{children:[j.jsx("p",{children:"Available Qualities"}),j.jsx("ul",{className:"_ac4a",children:(c=(c=c)!=null?c:a)==null?void 0:c.map(function(a){var c=a.src===b;return j.jsx("li",{className:c?"_ac4b":"",children:j.jsxs("p",{children:[a.configWidth,"w x ",a.configHeight,"h"]})})})})]})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=a.imageRef;b=b===void 0?null:b;var e=a.newVideoPlayer,f=a.post;a=a.videoRef;a=a===void 0?null:a;var g="";b!=null&&(g=b.currentSrc);a!=null&&(g=a.currentSrc);var h=b==null?"Video":"Image";h==="Video"&&(e===!0?h="Video (Next gen player)":h="Video (Legacy player)");return j.jsxs("div",{className:"_aigk",children:[j.jsx(c("PolarisStoryAdDebugger.react"),{postId:f.id}),j.jsxs("div",{className:"_ac49",children:[j.jsxs("p",{children:["Media type: ",h]}),j.jsxs("p",{children:["Post ID: ",f.id]}),j.jsxs("p",{children:["Has audio: ",f.hasAudio===!0?"true":"false"]}),j.jsxs("p",{children:["Browser Bandwidth Estimate: ",(e=d("PolarisNetworkInfo").getNavigatorConnection())==null?void 0:e.downlink," Mbps"]}),b!==null&&j.jsxs(j.Fragment,{children:[j.jsxs("p",{children:["Element Size: ",b==null?void 0:b.width,"w x ",b==null?void 0:b.height,"h"]}),j.jsx(k,{currentSrc:g,imageResources:f.displayResources})]}),a!==null&&j.jsxs(j.Fragment,{children:[j.jsxs("p",{children:["Element Size: ",a==null?void 0:a.clientWidth,"w x ",a==null?void 0:a.clientHeight,"h"]}),j.jsx(k,{currentSrc:g,videoResources:f.videoResources})]})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryPreview.react",["cx","IGDSSpinner.react","PolarisPreviewPhoto.react","isStringNullOrEmpty","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.className,e=a.dimensions;a=a.mediaPreview;return j.jsxs("div",{className:c("joinClasses")(b,"_ac59"),children:[!c("isStringNullOrEmpty")(a)&&j.jsx(d("PolarisPreviewPhoto.react").PreviewPhoto,{dimensions:e,previewData:a}),j.jsx(c("IGDSSpinner.react"),{position:"absolute",size:"medium"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryImage.react",["cx","IGDSBox.react","PolarisEventLoop","PolarisResponsiveImage.react","PolarisSponsoredStoryCaption.react","PolarisSponsoredStoryCaptionUtils","PolarisStoriesLoggingUtils","PolarisStoriesProvider.react","PolarisStoryConstants","PolarisStoryMediaDebugger","PolarisStoryMediaLayout.react","PolarisStoryPreview.react","isStringNullOrEmpty","joinClasses","nullthrows","polarisAdsSelectors","polarisDeveloperSettings","polarisWithRemountOnChange","react","usePrevious"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useEffect,m=e.useRef,n=e.useState;function a(a){var b=a.eventZone,e=a.isFirstStory,f=a.isPlaybackDisabled,g=a.isTransitioning,h=a.mediaRef,i=a.onClose,o=a.onNext,p=a.onNextReel,q=a.onPause,r=a.onPlay,s=a.onPostSeen,t=a.onPrev,u=a.onPrevReel,v=a.onUpdatePlayPercentage,w=a.post,x=a.viewerDimensions;a=n(!1);var y=a[0],z=a[1];a=n(!1);var A=a[0],B=a[1];a=n(null);var C=a[0],D=a[1];C=0;var E,F,G=c("usePrevious")(f),H=m(F),I=k(function(){H.current!=null&&(c("PolarisEventLoop").clearInterval(H.current),H.current=null)},[H]),J=function(){I(),o("automatic_forward")},K=k(function(){if(!A)return;B(!1)},[A]),L=k(function(){if(f||!y||A)return;B(!0)},[y,f,A,B]),M=function(){L()},N=function(){s(),z(!0)};l(function(){f&&G===!1&&!g?K():!f&&G===!0&&!g&&L()},[f,g,K,L,G]);l(function(){return function(){E&&(E.onload=null),I()}},[]);var O=m(C),P=k(function(){if(H.current!=null)return;H.current=c("PolarisEventLoop").setInterval(function(){O.current+=d("PolarisStoryConstants").STORY_UPDATE_TICK_S;var a=O.current*100/d("PolarisStoryConstants").STORY_IMAGE_DURATION_S;a=Math.min(a,100);v(a);a===100&&J()},d("PolarisStoryConstants").STORY_UPDATE_TICK_S*1e3)},[H,v,J,O]),Q=c("usePrevious")(A);l(function(){if(Q===A)return;!A&&O.current<d("PolarisStoryConstants").STORY_IMAGE_DURATION_S?(d("PolarisStoriesLoggingUtils").StoriesLoggingSession.startPauseTimer(),I(),q()):A&&!f&&y&&O.current<d("PolarisStoryConstants").STORY_IMAGE_DURATION_S&&(d("PolarisStoriesLoggingUtils").StoriesLoggingSession.stopPauseTimer(),P(),r())},[I,O,y,f,A,q,r,Q,P]);l(function(){y&&L()},[y,L]);var R=c("nullthrows")(w.dimensions);a=(a=d("polarisAdsSelectors").useStoryAdInfo(w.id,function(a){return a}))==null?void 0:(C=a.reelMediaBackgrounds)==null?void 0:C.get(w.id);C=(a==null?void 0:(C=a.top)==null?void 0:C.background_color)!=null&&(a==null?void 0:(C=a.bottom)==null?void 0:C.background_color)!=null?{background:"linear-gradient("+a.top.background_color+", "+a.bottom.background_color+")"}:null;a=d("PolarisStoriesProvider.react").useStoriesContext();var S=a.viewerHeight,T=a.viewerWidth,U=(a=w.caption)==null?void 0:a.trim(),V=!c("isStringNullOrEmpty")(U)&&w.isSponsored;return j.jsxs("div",{className:"_ac50","data-testid":void 0,ref:h,children:[null,j.jsx(c("PolarisStoryMediaLayout.react"),{intrinsicDimensions:R,style:C,children:function(a){var f,h=d("PolarisSponsoredStoryCaptionUtils").getSponsoredStoryCaptionMediaValues(S,a.layoutHeight),k=h.captionOffset,l=h.maxCaptionHeight;h=h.mediaOffset;return j.jsxs(j.Fragment,{children:[!y&&j.jsx(c("PolarisStoryPreview.react"),{className:a.className,dimensions:R,mediaPreview:w.mediaPreview},"p_"+w.id),j.jsx(c("PolarisResponsiveImage.react"),{className:c("joinClasses")(a.className,(A?"":"_ac51")+(y?"":" _ac52")),decoding:"sync",imgRef:function(a){return D(a)},onLoad:N,resizeKey:((f=w.src)!=null?f:"")+"-"+(g?"transitionInProgress":"transitionComplete"),src:w.src,srcSet:w.displayResources,style:{position:"relative",top:V===!0?-h:0}}),V===!0&&U!=null&&j.jsx("div",{style:{position:"relative",top:-k},children:j.jsx(c("PolarisSponsoredStoryCaption.react"),{caption:U,maxCaptionHeight:l,maxCaptionWidth:T,textBackgroundColor:w.captionBackgroundColor,textBackgroundColorAlpha:w.captionBackgroundColorAlpha,textColor:w.captionTextColor,textSize:w.captionTextSize})}),j.jsx(c("IGDSBox.react"),{alignItems:"center",bottom:!0,justifyContent:"center",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:j.jsx(b,{isFirstStory:e,isPlaying:A,isVideo:!1,mediaLayout:a,onClose:i,onNext:o,onNextReel:p,onPause:K,onPlay:L,onPrev:t,onPrevReel:u,onResume:M,showVideoPlayButton:!1,tappableStickersEligible:!0,viewerDimensions:x})})]})}})]})}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return a.post.id!==b.post.id}h=c("polarisWithRemountOnChange")(b)(a);g["default"]=h}),98);
__d("PolarisStoryMediaOverlayInfoFooterCTAContainer.react",["PolarisStoriesProvider.react","PolarisStoryMediaOverlayInfoFooterCTA.react","polarisStorySelectors","react","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.bannerInfo;a=a.entityID;var e=d("PolarisStoriesProvider.react").useStoriesContext(),f=e.updateStoriesContext;e=c("usePolarisSelector")(d("polarisStorySelectors").getTrayEntrypoint);var g=function(){f({isPlaybackDisabled:!0})},h=function(){f({isPlaybackDisabled:!1})};return i.jsx(c("PolarisStoryMediaOverlayInfoFooterCTA.react"),{bannerInfo:b,entityID:a,onCloseBloksApp:h,onOpenBloksApp:g,trayEntrypoint:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStorySensitivityOverlay.react",["cx","fbt","CometPlaceholder.react","IGCoreDialog","IGDSBox.react","IGDSDivider.react","IGDSText.react","JSResourceForInteraction","PolarisEventLoop","PolarisIGCoreBox","PolarisIGCoreButton","PolarisMediaOverlayInfoTypes","PolarisPreviewPhoto.react","PolarisReactRedux","PolarisSensitivityOverlayIcon.react","PolarisStoriesContext","PolarisStoryConstants","PolarisStoryMediaLayout.react","PolarisStorySensitivityOverlayMediaOverlayInfoCoverContents.react","lazyLoadComponent","nullthrows","polarisGetPostFromGraphMediaInterface","polarisStorySelectors","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisStorySensitivityOverlay.react")),m=d("PolarisStoryConstants").STORY_UPDATE_TICK_S*1e3;b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.state={showDialog:!1},c.$3=!1,c.$4=0,c.$5=null,c.$12=function(a,b){var e=b.action;switch(e){case d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.CLEAR_MEDIA_COVER:c.$10(a,b);break;case d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_BUTTON_ACTIONS.OPEN_BLOKS_APP:c.$11(a,b);break;default:break}},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){this.$1()};e.componentWillUnmount=function(){this.$2()};e.$1=function(){var a=this;if(this.$5!=null&&this.$5!==0)return;this.$5=c("PolarisEventLoop").setInterval(function(){if(a.state.showDialog||a.props.isPlaybackDisabled)return;a.$4+=d("PolarisStoryConstants").STORY_UPDATE_TICK_S;var b=a.$4*100/d("PolarisStoryConstants").STORY_IMAGE_DURATION_S;b=Math.min(b,100);a.props.onUpdatePreplayPercentage(b);b===100&&a.$6()},m)};e.$2=function(){this.$5!=null&&this.$5!==0&&(c("PolarisEventLoop").clearInterval(this.$5),this.$5=null)};e.$6=function(){this.$2(),this.props.onNext("automatic_forward")};e.$7=function(a){var b=this.props,c=b.containerModule,d=b.logger,e=b.onShowPostClicked,f=b.onUpdatePreplayPercentage;b=b.post;d.logConfirmationDialogAccept({containerModule:c,gatingEvent_DEPRECATED:this.$8(),mediaId:b.id,mediaOverlayCoverInfo:a});this.$2();f(0);e()};e.$9=function(a){var b=this.props,c=b.containerModule,d=b.logger;b=b.post;d.logConfirmationDialogDismiss({containerModule:c,gatingEvent_DEPRECATED:this.$8(),mediaId:b.id,mediaOverlayCoverInfo:a});this.setState({showDialog:!1})};e.$10=function(a,b){var c=this.props,d=c.containerModule,e=c.logger;c=c.post;e.logButtonClick({button:b,containerModule:d,gatingEvent_DEPRECATED:this.$8(),mediaId:c.id,mediaOverlayCoverInfo:a});this.setState({showDialog:!0})};e.$11=function(a,b){if((b==null?void 0:b.action_url)!=null){this.context.updateStoriesContext({bloksButtonAppId:b.action_url,bloksButtonClickCount:this.context.bloksButtonClickCount+1,isPlaybackDisabled:!0});var c=this.props,d=c.containerModule,e=c.logger;c=c.post;e.logButtonClick({button:b,containerModule:d,gatingEvent_DEPRECATED:this.$8(),mediaId:c.id,mediaOverlayCoverInfo:a})}};e.$13=function(a){var b=this.props,c=b.containerModule,d=b.logger;b=b.post;d.logImpression({containerModule:c,gatingEvent_DEPRECATED:this.$8(),mediaId:b.id,mediaOverlayCoverInfo:a})};e.$8=function(){var a=this.props,b=a.followStatus,e=a.post,f=a.reelId,g=a.reelPosition,h=a.reelSize,i=a.reelType,j=a.trayEntrypoint,k=a.trayPosition,l=a.traySessionId;a=a.viewerSessionId;var m=!(e.isVideo||!1)&&!(e.isSidecar||!1);return{a_pk:e.id,containermodule:"story",follow_status:b==null?void 0:(b=b.followedByViewer)==null?void 0:b.state,gate_type:"sensitivity",m_pk:e.id+"_"+c("nullthrows")((b=e.owner)==null?void 0:b.id),m_t:m?"1":"2",reel_id:f,reel_position:g,reel_size:h,reel_type:i,source_of_action:j,time_elapsed:this.$4,time_remaining:d("PolarisStoryConstants").STORY_IMAGE_DURATION_S-this.$4,tray_position:k,tray_session_id:l,viewer_session_id:a}};e.render=function(){var a=this,b=this.props.post,e=b.id,f=b.mediaPreview;if(f==null)return null;var g=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayMediaCoverInfoFromPost(this.props.post);this.$3||(this.$3=!0,this.$13(g));b=this.props;var h=b.eventZone,j=b.isFirstStory,m=b.onClose,n=b.onNext,o=b.onNextReel,p=b.onPause,q=b.onPlay,r=b.onPrev;b=b.onPrevReel;h=k.jsx(h,{isFirstStory:j,isPlaying:!1,isVideo:!1,onClose:m,onNext:n,onNextReel:o,onPause:p,onPlay:q,onPrev:r,onPrevReel:b,onResume:function(){},showVideoPlayButton:!1,tappableStickersEligible:!1});j=null;m=null;var s;if(g!=null){var t=g.bottomButton;s=k.jsx(c("PolarisStorySensitivityOverlayMediaOverlayInfoCoverContents.react"),{mediaOverlayCoverInfo:g,onMediaOverlayInfoButtonClick:this.$12,children:h});t!=null&&(j=t.text,m=function(){return a.$12(g,t)})}else s=k.jsxs(k.Fragment,{children:[k.jsx(c("PolarisSensitivityOverlayIcon.react"),{mediaOverlayIconGlyph:null}),h]});var u=this.state.showDialog&&k.jsxs(d("IGCoreDialog").IGCoreDialog,{body:k.jsx(c("IGDSText.react").Title,{children:i._("__JHASH__tavtqXFfTgz__JHASH__")}),onModalClose:function(){return a.$9(g)},children:[k.jsx(d("IGCoreDialog").IGCoreDialogItem,{onClick:function(){return a.$7(g)},children:i._("__JHASH__TA4Ki9jTP3E__JHASH__")}),k.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-primary-button",onClick:function(){return a.$9(g)},children:i._("__JHASH__WrmTrdS7tRy__JHASH__")})]}),v=j!=null&&j!==""&&k.jsxs(c("PolarisIGCoreBox"),{alignItems:"center",bottom:!0,dangerouslySetClassName:{__className:"_ac53"},paddingX:8,position:"absolute",width:"100%",children:[k.jsx(c("IGDSDivider.react"),{}),k.jsx(c("IGDSBox.react"),{paddingY:4,position:"relative",width:"100%",children:k.jsx(c("PolarisIGCoreButton"),{borderless:!0,color:"ig-secondary-button",fullWidth:!0,onClick:m!=null?m:void 0,children:k.jsx(c("IGDSText.react"),{color:"webAlwaysWhite",children:j})})})]});n=this.context;o=n.bloksButtonAppId;p=n.bloksButtonClickCount;return k.jsxs(k.Fragment,{children:[k.jsx(c("IGDSBox.react"),{height:"100%",position:"relative",width:"100%",children:k.jsx(c("PolarisStoryMediaLayout.react"),{intrinsicDimensions:{height:this.context.viewerHeight,width:this.context.viewerWidth},children:function(){return k.jsxs(k.Fragment,{children:[k.jsx(d("PolarisPreviewPhoto.react").PreviewPhoto,{dimensions:{height:a.context.viewerHeight,width:a.context.viewerWidth},previewData:f}),k.jsxs(c("PolarisIGCoreBox"),{bottom:!0,dangerouslySetClassName:{__className:"_abws"},justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:[s,u]}),v]})}})}),p>0&&o&&k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(l,{appId:o,bridgeOverrides_DEPRECATED:{onResumeStoryPlayback:function(){a.context.updateStoriesContext({bloksButtonClickCount:0,isPlaybackDisabled:!1})}},params:{media_id:e,module:this.props.trayEntrypoint}},p)})]})};return b}(k.Component);b.contextType=d("PolarisStoriesContext").StoriesContext;function a(a){return babelHelpers["extends"]({},d("polarisStorySelectors").getStoryLoggingPackage(a))}e=d("PolarisReactRedux").connect(a,null)(b);g["default"]=e}),98);
__d("PolarisStorySensitivityOverlayContainer.react",["PolarisStorySensitivityOverlay.react","react","usePolarisStorySensitivityOverlayLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=c("usePolarisStorySensitivityOverlayLogger")();return i.jsx(c("PolarisStorySensitivityOverlay.react"),babelHelpers["extends"]({},a,{logger:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryTapToPlayOverlay.react",["IGDSBox.react","PolarisPreviewPhoto.react","PolarisReactRedux","PolarisStoryMediaLayout.react","PolarisStoryTapToPlay.react","polarisStorySelectors","react","usePolarisStoryTapToPlayOverlayLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect,k=300;function a(a){var b,e=a.onShowPostClicked;a=a.post;var f=c("usePolarisStoryTapToPlayOverlayLogger")();j(function(){f.logImpression()},[f]);var g=(b=d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getCurrentPostAuthor))==null?void 0:b.username,h=function(){f.logTapToPlay(),e()};b=a.dimensions;var l=b===void 0?{height:k,width:k}:b,m=a.mediaPreview;return i.jsx(c("IGDSBox.react"),{height:"100%",position:"relative",width:"100%",children:i.jsx(c("PolarisStoryMediaLayout.react"),{intrinsicDimensions:l,children:function(){return i.jsxs(i.Fragment,{children:[m!=null&&i.jsx(d("PolarisPreviewPhoto.react").PreviewPhoto,{dimensions:l,previewData:m}),i.jsx(c("IGDSBox.react"),{alignItems:"center",bottom:!0,direction:"column",display:"flex",justifyContent:"center",left:!0,marginEnd:"auto",marginStart:"auto",position:"absolute",right:!0,top:!0,width:"75%",children:i.jsx(c("PolarisStoryTapToPlay.react"),{onTapToPlay:h,username:g})})]})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoriesAppInstallDialog.react",["fbt","IGCoreDialog","IGDSButton.react","PolarisConfig","PolarisConfigConstants","PolarisLogger","PolarisOpenInApp","PolarisReactRedux","polarisNavigationSelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._("__JHASH__eYXq4ehXgyn__JHASH__"),l=h._("__JHASH__ysCwXzHm8aV__JHASH__");h._("__JHASH__ZkUEVz34LaQ__JHASH__");var m=h._("__JHASH__przBOMgnPTR__JHASH__"),n=h._("__JHASH__QxtkzLVtWAv__JHASH__"),o=h._("__JHASH__BrhM5kbNiVq__JHASH__");b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),i=0;i<f;i++)g[i]=arguments[i];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$1=function(a){a.preventDefault(),d("PolarisLogger").logAction("storiesStickerUnsupportedAppsellClick",{medium:"installLink",platform:d("PolarisConfig").getAppPlatform(),source:"storySticker",stickerType:e.props.fallbackType}),d("PolarisOpenInApp").openInApp(e.props.android,e.props.ios,e.props.originalPath)},e.$2=function(){d("PolarisLogger").logAction("storiesStickerUnsupportedAppsellDismiss",{stickerType:e.props.fallbackType}),e.props.onClose()},e.$3=h._("__JHASH__jK2FyqoAhEm__JHASH__",[h._param("app store",j.jsx(c("IGDSButton.react"),{display:"block",label:h._("__JHASH__DRhCeBJULE6__JHASH__"),onClick:e.$1,target:"_blank",variant:"primary_link"})),h._param("play store",j.jsx(c("IGDSButton.react"),{display:"block",label:h._("__JHASH__6ssrLZhPCrg__JHASH__"),onClick:e.$1,target:"_blank",variant:"primary_link"}))]),b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.render=function(){var a=d("PolarisConfig").getAppPlatform();switch(a){case d("PolarisConfigConstants").appPlatformTypes.ANDROID:case d("PolarisConfigConstants").appPlatformTypes.IOS:return j.jsxs(d("IGCoreDialog").IGCoreDialog,{body:l,onModalClose:this.$2,title:k,children:[j.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-primary-button",onClick:this.$1,children:m}),j.jsx(d("IGCoreDialog").IGCoreDialogItem,{onClick:this.$2,children:n})]});default:return j.jsx(d("IGCoreDialog").IGCoreDialog,{body:this.$3,onModalClose:this.$2,title:k,children:j.jsx(d("IGCoreDialog").IGCoreDialogItem,{onClick:this.$2,children:o})})}};return b}(j.Component);function a(a){return babelHelpers["extends"]({},d("polarisNavigationSelectors").getDeepLink__DEPRECATED(a))}e=d("PolarisReactRedux").connect(a)(b);g["default"]=e}),98);
__d("PolarisStoryTappablePopup.react",["cx","fbt","InstagramODS","Locale","PolarisGuideLogger","PolarisGuideStrings","PolarisLinkBuilder","PolarisLogger","PolarisNavigationUtils","browserHistory","nullthrows","polarisUnexpected","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react");function a(a){var b=a.currentObject,e=a.onTagClick;a=function(a){var b=null,f=function(){return null};switch(a.type){case"GraphTappableHashtag":a.attribution!=null&&a.customTitle!=null?b=k.jsxs(k.Fragment,{children:[k.jsx("div",{children:a.customTitle}),k.jsx("div",{className:"_ac5q",children:a.attribution})]}):b=i._("__JHASH__j-m2mM8g739__JHASH__");f=function(){d("browserHistory").browserHistory.push(d("PolarisLinkBuilder").buildTagLink(c("nullthrows")(a.hashtagName)))};break;case"GraphTappableLocation":b=i._("__JHASH__JBsMhx8LdAa__JHASH__");f=function(){d("browserHistory").browserHistory.push(d("PolarisLinkBuilder").buildLocationLink({id:c("nullthrows")(a.locationId),slug:""}))};break;case"GraphTappableMention":b=a.mentionFullname!=null&&a.mentionFullname!==""?a.mentionFullname:a.mentionUsername;f=function(){d("browserHistory").browserHistory.push(d("PolarisLinkBuilder").buildUserLink(c("nullthrows")(a.mentionUsername)))};break;case"TappableLink":b=i._("__JHASH__Hmd96IUCrAZ__JHASH__");c("InstagramODS").incr("web.stories.link_sticker.view");f=function(){c("InstagramODS").incr("web.stories.link_sticker.clicks"),d("PolarisNavigationUtils").openExternalURL(c("nullthrows")(a.url))};break;case"GraphTappableFeedMedia":b=i._("__JHASH__vWGiSQVQct8__JHASH__");f=function(){d("browserHistory").browserHistory.push(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(a.feedPostShortcode)))};break;case"GraphTappableFeedClips":b=i._("__JHASH__gGl8vL-QfLi__JHASH__");f=function(){d("browserHistory").browserHistory.push(d("PolarisLinkBuilder").buildMediaLink(c("nullthrows")(a.feedPostShortcode)))};break;case"GraphTappableGuide":b=d("PolarisGuideStrings").VIEW_GUIDE_STORY_CTA,f=function(){var b;d("PolarisGuideLogger").logGuideEntry({entryPoint:"story",guideID:(b=c("nullthrows"))(a.guideId)});d("PolarisLogger").logAction("guideStoryClick");d("browserHistory").browserHistory.push(d("PolarisLinkBuilder").buildGuideLink(b(a.guideOwnerUsername),b(a.guideTitle),b(a.guideId)))}}f===null&&(f=function(){c("polarisUnexpected")("Tappable object type should be hashtag, location, or mention")});return{content:b,onClick:function(a){a.stopPropagation(),f(),e&&e(a)}}};var f=c("Locale").isRTL(),g=c("nullthrows")(b.x)*100,h=c("nullthrows")(b.y)*100;g={left:g+"%",top:h+"%",transform:"translate(-50%, -120%)"};h=a(b);a=h.content;b=h.onClick;return k.jsxs("div",{className:"_ac5r",style:g,children:[k.jsxs("div",{className:"_ac5s",onClick:b,role:"link",tabIndex:0,children:[k.jsx("div",{className:"_ac5t",children:a}),k.jsx("div",{className:"_9znl",style:{transform:f?"rotate(180deg)":void 0}})]}),k.jsx("div",{className:"_ac5u"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisTappableObjectContainer.react",["cx","PolarisLogger","polarisPrefix","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect;function a(a){var b=a.id,e=a.isEnabled,f=a.mediaLayout,g=a.object,h=a.onTappableClick;l(function(){g.type==="GraphTappableFallback"&&d("PolarisLogger").logAction("storiesStickerUnsupportedRendered",{stickerType:g.fallbackType})},[g]);a=k(function(a){a.stopPropagation(),g.type==="GraphTappableFallback"?(d("PolarisLogger").logAction("storiesStickerUnsupportedClick",{appsellShown:!0,stickerType:g.fallbackType}),h(b)):h(b)},[g,b,h]);var i=g.width*f.layoutWidth,m=g.height*f.layoutHeight,n=.5*i,o=.5*m;n=g.x*f.layoutWidth-n;f=g.y*f.layoutHeight-o;o=g.rotation*Math.PI*2;m={height:m+"px",left:n+"px",top:f+"px",width:i+"px"};return j.jsx("div",{className:"_abwz",style:m,children:j.jsx("div",{className:"_abw-"+(e?" _abw_":""),onClick:a,role:"button",style:c("polarisPrefix")({transform:"rotate("+o+"rad)"}),tabIndex:"0"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryTappableObjects.react",["cx","fbt","CometPlaceholder.react","JSResourceForInteraction","Locale","PolarisReactRedux","PolarisStoriesAppInstallDialog.react","PolarisStoriesContext","PolarisStoryActions","PolarisStoryTappablePopup.react","PolarisTappableObjectContainer.react","immutable-4.0.0-rc.9","lazyLoadComponent","nullthrows","polarisStorySelectors","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useMemo,n=b.useState,o=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisStoryTappableObjects.react")),p=function(a){var b=a.handleTappableClick,d=a.isPlaying,e=a.mediaLayout,f=a.tappableObjectById,g=a.tappedObjectId;return Object.keys(f).map(function(a){var h=f[a];return k.jsx(c("PolarisTappableObjectContainer.react"),{id:a,isEnabled:d||!!g,mediaLayout:e,object:h,onTappableClick:b},a)})};function q(a){var b=a.tappableObjectById,e=a.tappedObjectId;a=a.tappedObjectTimestamp;var f=d("PolarisReactRedux").useDispatch();if(e==null||e==="")return null;b=b[e];if(b==null)return null;e=e+"_"+c("nullthrows")(a);if(b.type==="GraphTappableFallback")return k.jsx(c("PolarisStoriesAppInstallDialog.react"),{fallbackType:b.fallbackType,onClose:function(){f(d("PolarisStoryActions").resumeStorySession())}});return b.type==="BloksTappable"||b.type==="BloksSticker"?null:k.jsx(c("PolarisStoryTappablePopup.react"),{currentObject:b},e)}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.tappableObjectById,d=a.tappedObjectId;a=a.tappedObjectTimestamp;if(d==null||d===""||a==null)return null;b=b[d];if(b==null)return null;d=d+"_"+a;a=b.bloks_app;if(b.type!=="BloksSticker"||a==null)return null;var e=c("Locale").isRTL(),f=e?"right":"left",g=b.x;g=e?1-g:g;f=(e={},e[f]=g*100+"%",e.position="relative",e.top=b.y*100+"%",e.zIndex=2,e);return k.jsx("div",{style:f,children:k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(o,{allowScreenOverflow:!0,appId:a,loadingFallback:k.jsx("div",{}),params:b.bloks_params,props:new Map(Object.entries((g=b.bloks_props)!=null?g:{}))},d)})})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b,c=a.isPlaying;a=a.mediaLayout;var e=(b=d("PolarisReactRedux")).useDispatch(),f=l(d("PolarisStoriesContext").StoriesContext),g=n(Date.now()),h=g[0],j=g[1],o=b.useSelector(function(a){return d("polarisStorySelectors").getCurrentPostId(a)}),s=b.useSelector(function(a){return o==null?new(d("immutable-4.0.0-rc.9").List)():a.stories.tappableObjectsByPostId.get(o)});g=b.useSelector(function(a){return o==null?null:a.stories.tappedObjectId});b=m(function(){var a={};s!=null&&s.forEach(function(b,c){a[""+c]=babelHelpers["extends"]({},b)});return a},[s]);var t=function(a){j(Date.now()),e({tappedObjectId:a,type:"STORY_SET_TAPPED_OBJECT"})};return k.jsxs("div",{"aria-label":i._("__JHASH__Y-748_CVtpy__JHASH__"),className:"_ac57"+(g?" _ac58":""),onClick:function(){e(d("PolarisStoryActions").resumeStorySession())},role:"button",style:f.mediaDimensions,tabIndex:"0",children:[k.jsx(p,{handleTappableClick:t,isPlaying:c,mediaLayout:a,tappableObjectById:b,tappedObjectId:g}),k.jsx(q,{tappableObjectById:b,tappedObjectId:g,tappedObjectTimestamp:h}),k.jsx(r,{tappableObjectById:b,tappedObjectId:g,tappedObjectTimestamp:h})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisDesktopStoryEventZone.react",["cx","PolarisStoriesProvider.react","PolarisStoryTappableObjects.react","getPolarisKeyCommandConfig","nullthrows","react","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useMemo;function a(a){var b=a.isFirstStory,e=a.isPlaying,f=a.mediaLayout,g=a.onClose,h=a.onNext,i=a.onNextReel,m=a.onPause,n=a.onPlay,o=a.onPrev,p=a.onPrevReel;a=a.tappableStickersEligible;var q=d("PolarisStoriesProvider.react").useStoriesContext(),r=q.updateStoriesContext;q=function(a){a.preventDefault()};var s=k(function(a){r({isPaused:!0}),m(a)},[r,m]),t=k(function(a){r({isPaused:!1}),n(a)},[r,n]),u=k(function(){e?s():t()},[e,s,t]),v=l(function(){var a;return[(a=d("getPolarisKeyCommandConfig")).getPolarisKeyCommandConfig("stories","togglePause",function(){u()}),a.getPolarisKeyCommandConfig("stories","nextStory",function(){h("tap_forward")}),a.getPolarisKeyCommandConfig("stories","nextReel",function(){i("swipe_forward")}),a.getPolarisKeyCommandConfig("stories","prevStory",function(){if(b)return;o()}),a.getPolarisKeyCommandConfig("stories","prevReel",function(){p()}),a.getPolarisKeyCommandConfig("stories","exit",function(){g()})]},[h,i,b,o,p,u,g]);c("useGlobalKeyCommands")(v);v=function(a){a.button===0&&s(a)};var w=function(a){a.button===0&&t(a)},x=function(a){s(a)},y=function(a){a.touches.length===0&&t(a)};return j.jsxs("div",{className:"_ac0x",children:[j.jsx("div",{className:"_ac0y",onContextMenu:q,onMouseDown:v,onMouseUp:w,onTouchEnd:y,onTouchStart:x,role:"dialog"}),a&&f!=null&&j.jsx(c("PolarisStoryTappableObjects.react"),{isPlaying:e,mediaLayout:c("nullthrows")(f)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisMobileStoryEventZone.react",["cx","Locale","PolarisReactRedux","PolarisStoriesContext","PolarisStoriesLoggingUtils","PolarisStoryActions","PolarisStoryTappableObjects.react","nullthrows","polarisStorySelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useContext,l=b.useRef,m=200,n=50,o=100,p=500;function a(a){var b=a.isFirstStory,e=a.isPlaying,f=a.mediaLayout,g=a.onClose,h=a.onNext,i=a.onNextReel,q=a.onPause,r=a.onPlay,s=a.onPrev,t=a.onPrevReel,u=a.onResume,v=a.showVideoPlayButton,w=a.tappableStickersEligible;a=a.viewerDimensions;var x=k(d("PolarisStoriesContext").StoriesContext),y=d("PolarisReactRedux").useDispatch(),z=c("nullthrows")(d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getCurrentPost)),A=z.isSponsored,B=z.storyCtaUrl,C=l({pauseStart:null,touchStart:null,touchStartX:null,touchStartY:null});z=function(a){a.preventDefault()};var D=function(a){if(v)return;C.current.touchStart==null&&(C.current.touchStart=Date.now(),C.current.touchStartX=a.touches[0].clientX,C.current.touchStartY=a.touches[0].clientY);G(a)},E=function(a){if(v)return;a.touches.length===0&&H(a);F(a)},F=function(a){var b=C.current,d=b.touchStart,e=b.touchStartX;b=b.touchStartY;if(d!=null){d=Date.now()-c("nullthrows")(d);e=a.changedTouches[0].clientX-c("nullthrows")(e);a=a.changedTouches[0].clientY-c("nullthrows")(b);d<=p&&(Math.abs(a)>n&&Math.abs(e)<o?a<0?A===!0?I():x.replyInputTextAreaRef!=null&&x.replyInputTextAreaRef.current!=null&&x.replyInputTextAreaRef.current.focus():g("swipe_down"):Math.abs(a)<o&&(e>n?c("Locale").isRTL()?i("swipe_forward"):t():e<-n&&(c("Locale").isRTL()?t():i("swipe_forward"))));C.current.touchStart=null;C.current.touchStartX=null;C.current.touchStartY=null}},G=function(a){q(),x.updateStoriesContext({isPaused:!0}),d("PolarisStoriesLoggingUtils").StoriesLoggingSession.startTapPauseTimer(),C.current.pauseStart==null&&(C.current.pauseStart=Date.now())},H=function(a){var b=C.current.pauseStart;b!=null&&(u(),x.updateStoriesContext({isPaused:!1}),y(d("PolarisStoryActions").logStoriesMediaPause(d("PolarisStoriesLoggingUtils").StoriesLoggingSession.getData().tapPauseTime)),Date.now()-b>=m&&(a.stopPropagation(),a.preventDefault()));C.current.pauseStart=null},I=function(){B!=null&&y(d("PolarisStoryActions").openCtaUrl(B))},J=function(a){y(d("PolarisStoryActions").resumeStorySession()),r(a)};return j.jsxs("div",{className:"_aafd",style:a,children:[j.jsxs("div",{className:"_aafe",onContextMenu:z,onTouchEnd:E,onTouchStart:D,role:"button",tabIndex:"0",children:[j.jsx("button",{className:"_aaff _aafg",onClick:b?null:s}),j.jsx("button",{className:"_aafh",onClick:b?null:s}),j.jsx("button",{className:"_aafi",onClick:function(){return h("tap_forward")}}),j.jsx("button",{className:"_aafj _aafg",onClick:function(){return h("tap_forward")}}),v&&j.jsx("div",{className:"_aafk",children:j.jsx("button",{className:"_aafl _9zwu",onClick:J})})]}),w&&f!=null&&j.jsx(c("PolarisStoryTappableObjects.react"),{isPlaying:e,mediaLayout:c("nullthrows")(f)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisStoryEventZone",["PolarisDesktopStoryEventZone.react","PolarisMobileStoryEventZone.react","PolarisReactRedux","PolarisStoryActions","VideoPlayerHooks","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useCallback;function a(a){var b=a.autoplay,e=a.isDesktop,f=a.isFirstStory,g=a.isVideo,h=a.onNext,l=a.onNextReel,m=a.onPlayButtonClick,n=a.onPrev,o=a.onPrevReel,p=a.playButtonClicked,q=a.thumbnailLoaded,r=a.videoHeight;a=a.videoWidth;var s=(i||(i=d("VideoPlayerHooks"))).useController(),t=d("PolarisReactRedux").useDispatch(),u=i.usePaused(),v=i.usePlaying(),w=k(function(a){a===void 0&&(a="tap_exit"),t(d("PolarisStoryActions").closeReels(a))},[t]),x=k(function(){u&&s.play("user_initiated"),m()},[s,u,m]),y=k(function(){v&&s.pause("user_initiated")},[s,v]);q=q&&!p;b&&(q=!1);if(e)return j.jsx(c("PolarisDesktopStoryEventZone.react"),{isFirstStory:f,isPlaying:v,isVideo:g,mediaLayout:{layoutHeight:r,layoutWidth:a},onClose:w,onNext:h,onNextReel:l,onPause:c("emptyFunction"),onPlay:c("emptyFunction"),onPrev:n,onPrevReel:o,onResume:c("emptyFunction"),showVideoPlayButton:!1,tappableStickersEligible:!0});else return j.jsx(c("PolarisMobileStoryEventZone.react"),{isFirstStory:f,isPlaying:v,isVideo:g,mediaLayout:{layoutHeight:r,layoutWidth:a},onClose:w,onNext:function(a){return h(a,!1)},onNextReel:function(a){return l(a,!1)},onPause:y,onPlay:x,onPrev:function(){return n(!1)},onPrevReel:function(){return o(!1)},onResume:x,showVideoPlayButton:q,tappableStickersEligible:!0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisStoryMobilePreplay",["PolarisStoryConstants","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useEffect,l=b.useRef;function a(a,b,c,e,f,g){var h=(i||(i=d("VideoPlayerHooks"))).usePlaying(),m=l(0),n=l(null),o=j(function(){n.current!=null&&(window.clearInterval(n.current),n.current=null),a!=null&&a(0)},[a]);k(function(){if(!f||b||h||a==null||e||g)return;if(n.current!=null)return;n.current=window.setInterval(function(){m.current+=d("PolarisStoryConstants").STORY_UPDATE_TICK_S;var b=Math.min(m.current*100/d("PolarisStoryConstants").STORY_IMAGE_DURATION_S,100);a(b);b===100&&(o(),c("automatic_forward",!1))},d("PolarisStoryConstants").STORY_UPDATE_TICK_MS);return function(){o()}},[o,e,b,h,a,c,f,g])}g["default"]=a}),98);
__d("usePolarisStoryProgressUpdater",["PolarisStoryConstants","VideoPlayerHooks","useInterval"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){b===void 0&&(b=d("PolarisStoryConstants").STORY_UPDATE_TICK_MS);var e=(h||(h=d("VideoPlayerHooks"))).useController(),f=h.usePlaying();c("useInterval")(function(){if(!f)return;var b=e.getPlayheadPosition(),c=e.getCurrentState().duration;if(c>0){b=Math.min(b/c*100,100);a!=null&&a(b)}},b,[e,a,f])}g["default"]=a}),98);
__d("usePolarisStoryVideoMuteControl",["VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useEffect;function a(a){var b=(i||(i=d("VideoPlayerHooks"))).useController(),c=i.useMuted();j(function(){a!==c&&b.setMuted(a,"user_initiated")},[b,a,c])}g["default"]=a}),98);
__d("usePolarisStoryVideoPlaybackControl",["PolarisStoriesProvider.react","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useState;function a(a,b,c,e,f){var g=(i||(i=d("VideoPlayerHooks"))).useController(),h=i.usePaused(),l=i.usePlaying(),m=i.useEnded(),n=d("PolarisStoriesProvider.react").useStoriesContext(),o=n.updateStoriesContext;n=k(!1);var p=n[0],q=n[1];j(function(){f&&o({isPaused:!1})},[o,f]);j(function(){if(!c||e)return;a!==h&&(a?g.pause("user_initiated"):g.play("autoplay_initiated"))},[g,c,a,e,h]);j(function(){m&&b("automatic_forward",!1)},[m,b]);j(function(){e&&l&&(g.pause("user_initiated"),q(!0))},[g,e,l]);j(function(){p&&!e&&(g.play("user_initiated"),q(!1))},[g,e,p])}g["default"]=a}),98);
__d("usePolarisStoryVideoSeenStateTracker",["PolarisReactRedux","PolarisStoryActions","VideoPlayerHooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useRef;function a(a,b,c){var e=k(!1),f=(i||(i=d("VideoPlayerHooks"))).usePlaying(),g=d("PolarisReactRedux").useDispatch();j(function(){if(e.current===!0)return;(c||f)&&(g(d("PolarisStoryActions").updateReelSeen(a,b)),e.current=!0)},[g,f,b,a,c])}g["default"]=a}),98);
__d("usePolarisStoryVideoXControllerLogger",["PolarisReactRedux","PolarisStoriesLoggingUtils","PolarisVideoHelpers","VideoPlayerHooks","polarisAdsSelectors","polarisRelationshipSelectors","polarisVideoUtils","react","usePolarisVideoXControllerLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useRef;function a(a){var b,e=(b=(b=a.owner)==null?void 0:b.id)!=null?b:"",f=(i||(i=d("VideoPlayerHooks"))).useController();b=d("polarisAdsSelectors").useStoryAdInfo(a.id,function(a){return a});var g=d("PolarisReactRedux").useSelector(function(a){return d("polarisRelationshipSelectors").getRelationship(a.relationships,e)}),h=k(null);j(function(){var a=f.subscribe(function(){var a=f.getCurrentState(),b=h.current;(b==null?void 0:b.paused)===!1&&a.paused===!0&&d("PolarisStoriesLoggingUtils").StoriesLoggingSession.startPauseTimer();(b==null?void 0:b.playing)===!1&&a.playing===!0&&d("PolarisStoriesLoggingUtils").StoriesLoggingSession.stopPauseTimer();h.current=a});return function(){a.remove()}},[f]);return c("usePolarisVideoXControllerLogger")({adInfo:b,analyticsContext:"StoriesPage",carouselParentId:a.carouselParentId,dashInfo:d("PolarisVideoHelpers").getDashInfoFromPost(a),followingStatus:d("polarisVideoUtils").getFollowingStatus(g),id:a.id,ownerId:(b=a.owner)==null?void 0:b.id,postedAt:a.postedAt,trackingToken:a.trackingToken})}g["default"]=a}),98);
__d("PolarisStoryVideoPlayerSurface.react",["IGDSSpinner.react","PolarisStoriesProvider.react","PolarisStoryMediaOverlayInfoFooterCTAContainer.react","VideoPlayerHooks","VideoPlayerSurface.react","VideoPlayerWithThumbnail.react","cr:4431","polarisGetPostFromGraphMediaInterface","react","usePolarisStoryEventZone","usePolarisStoryMobilePreplay","usePolarisStoryProgressUpdater","usePolarisStoryVideoMuteControl","usePolarisStoryVideoPlaybackControl","usePolarisStoryVideoSeenStateTracker","usePolarisStoryVideoXControllerLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useState;function a(a){var e=a.autoplay,f=a.isDesktop,g=a.isFirstStory,h=a.mediaRef,l=a.onNext,m=a.onNextReel,n=a.onPrev,o=a.onPrevReel,p=a.onUpdatePlayPercentage,q=a.post,r=a.reelId,s=a.videoHeight;a=a.videoWidth;var t=(i||(i=d("VideoPlayerHooks"))).useStalling(),u=d("PolarisStoriesProvider.react").useStoriesContext(),v=u.isMuted,w=u.isPaused;u=u.isPlaybackDisabled;var x=k(!1),y=x[0],z=x[1];x=k(!1);var A=x[0],B=x[1];x=b("cr:4431")(q);c("usePolarisStoryVideoXControllerLogger")(q);c("usePolarisStoryVideoMuteControl")(v);c("usePolarisStoryVideoPlaybackControl")(w,l,f,u,e===!0);c("usePolarisStoryProgressUpdater")(p);c("usePolarisStoryMobilePreplay")(p,f,l,y,A,e===!0);c("usePolarisStoryVideoSeenStateTracker")(r,q.id,A);v=c("usePolarisStoryEventZone")({autoplay:e===!0,isDesktop:f,isFirstStory:g,isVideo:!0,onNext:l,onNextReel:m,onPlayButtonClick:function(){z(!0)},onPrev:n,onPrevReel:o,playButtonClicked:y,thumbnailLoaded:A,videoHeight:s,videoWidth:a});w=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayBottomBannerInfoFromRootPost(q,!0);return j.jsx(c("VideoPlayerSurface.react"),{children:j.jsxs("div",{className:"x5yr21d xh8yej3",ref:h,children:[t&&j.jsx(c("IGDSSpinner.react"),{position:"absolute",size:"medium"}),x,q.src!=null&&j.jsx(c("VideoPlayerWithThumbnail.react"),{onLoad:function(){return B(!0)},src:q.src}),v,w&&j.jsx(c("PolarisStoryMediaOverlayInfoFooterCTAContainer.react"),{bannerInfo:w,entityID:q.id})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisGetStoryMediaLayout",[],(function(a,b,c,d,e,f){"use strict";var g=1.3,h=1;function a(a,b,c,d){if(a==null)return[c,d];b=b?h:g;c=c;d=d;var e=c/d;a=a.width/a.height;e/a>b||a/e>b?e>a?c=d*a:d=c/a:e>a?d=c/a:c=d*a;return[d,c]}f.getStoryMediaLayout=a}),66);
__d("PolarisStoryVideoPlayerWrapper.react",["PolarisGetStoryMediaLayout","PolarisResponsiveBlock.react","PolarisStoriesProvider.react","polarisAdsSelectors","react","stylex","usePolarisIsTallDevice"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useCallback,l={root:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xh8yej3",$$css:!0},rootDesktop:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",$$css:!0},videoContainer:{alignItems:"x1qjc9v5",borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",boxSizing:"x9f619",display:"x1lliihq",fontSize:"xk390pu",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6",verticalAlign:"xzjhpmk",$$css:!0}};function a(a){var b,e,f=a.children,g=a["data-testid"];g=a.isDesktop;var i=a.post,m=a.setVideoHeight,n=a.setVideoWidth,o=a.videoHeight;a=a.videoWidth;var p=c("usePolarisIsTallDevice")(),q=d("PolarisStoriesProvider.react").useStoriesContext(),r=q.updateStoriesContext;q=k(function(a,b){a=d("PolarisGetStoryMediaLayout").getStoryMediaLayout(i.dimensions,p,a,b);b=a[0];a=a[1];m(b);n(a);r({mediaDimensions:{height:b,width:a}})},[p,i.dimensions,m,n,r]);b=(b=d("polarisAdsSelectors").useStoryAdInfo(i.id,function(a){return a}))==null?void 0:(b=b.reelMediaBackgrounds)==null?void 0:b.get(i.id);e=(b==null?void 0:(e=b.top)==null?void 0:e.background_color)!=null&&(b==null?void 0:(e=b.bottom)==null?void 0:e.background_color)!=null?{background:"linear-gradient("+b.top.background_color+", "+b.bottom.background_color+")"}:null;return j.jsx(c("PolarisResponsiveBlock.react"),{className:(h||(h=c("stylex")))(l.root,g&&l.rootDesktop),"data-testid":void 0,onResize:q,style:e,children:j.jsx("div",{className:"x1qjc9v5 x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x1lliihq xk390pu xdj266r x11i5rnm xat24cr x1mh8g0r xexx8yu x4uap5 x18d9i69 xkhd6sd x1n2onr6 xzjhpmk",style:{height:o,width:a},children:f})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryVideoPlayer.react",["PolarisSponsoredStoryCaption.react","PolarisSponsoredStoryCaptionUtils","PolarisStoriesProvider.react","PolarisStoryVideoPlayerSurface.react","PolarisStoryVideoPlayerWrapper.react","PolarisUA","PolarisVideo.react","PolarisVideoHelpers","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useState;function a(a){var b,e,f=a.isFirstStory,g=a.mediaRef,h=a.onNext,k=a.onNextReel,l=a.onPrev,m=a.onPrevReel,n=a.onUpdatePlayPercentage,o=a.post;a=a.reelId;var p=j(0),q=p[0];p=p[1];var r=j(0),s=r[0];r=r[1];var t=d("PolarisStoriesProvider.react").useStoriesContext(),u=t.viewerHeight;t=t.viewerWidth;if(o.isVideo!==!0)return null;var v=d("PolarisUA").isDesktop();b=(b=d("PolarisVideoHelpers").getSDVideoSrcFromPost(o))!=null?b:o.videoUrl;var w=d("PolarisVideoHelpers").getHDVideoSrcFromPost(o);e=(e=o.caption)==null?void 0:e.trim();var x=!c("isStringNullOrEmpty")(e)&&o.isSponsored===!0;u=d("PolarisSponsoredStoryCaptionUtils").getSponsoredStoryCaptionMediaValues(u,q);var y=u.captionOffset,z=u.maxCaptionHeight;u=u.mediaOffset;var A=o.isSponsored===!0&&o.dimensions!=null;return i.jsxs(c("PolarisStoryVideoPlayerWrapper.react"),{"data-testid":void 0,isDesktop:v,post:o,setVideoHeight:p,setVideoWidth:r,videoHeight:q,videoWidth:s,children:[i.jsx("div",{style:{height:"100%",position:"relative",top:x?-u:0},children:i.jsx(c("PolarisVideo.react"),{autoplay:!0,dashInfo:d("PolarisVideoHelpers").getDashInfoFromPost(o),hdSrc:w,loopCount:0,mediaId:o.id,originalHeight:(p=o.dimensions)==null?void 0:p.height,originalWidth:(r=o.dimensions)==null?void 0:r.width,renderVideoPixelsFit:A?function(){return{objectFit:"cover"}}:null,sdSrc:b,children:i.jsx(c("PolarisStoryVideoPlayerSurface.react"),{autoplay:!0,isDesktop:v,isFirstStory:f,mediaRef:g,onNext:h,onNextReel:k,onPrev:l,onPrevReel:m,onUpdatePlayPercentage:n,post:o,reelId:a,videoHeight:q,videoWidth:s})},o.id)}),x&&e!=null&&i.jsx("div",{style:{position:"relative",top:-y},children:i.jsx(c("PolarisSponsoredStoryCaption.react"),{caption:e,maxCaptionHeight:z,maxCaptionWidth:t,textBackgroundColor:o.captionBackgroundColor,textBackgroundColorAlpha:o.captionBackgroundColorAlpha,textColor:o.captionTextColor,textSize:o.captionTextSize})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryMedia.react",["PolarisConfig","PolarisStoriesContext","PolarisStoryExpired.react","PolarisStoryImage.react","PolarisStoryMediaOverlayInfoFooterCTAContainer.react","PolarisStorySensitivityOverlayContainer.react","PolarisStoryTapToPlayOverlay.react","PolarisStoryVideoPlayer.react","cr:4998","getPolarisKeyCommandConfig","polarisGetPostFromGraphMediaInterface","polarisRelationshipSelectors","react","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var e=a.adImpressionRef,f=a.autoPlay;a.currentReelItemIndex;var g=a.eventZone,h=a.isExpired,k=a.isFirstStory,l=a.isInitialLoad,m=a.onClose,n=a.onNext,o=a.onNextReel,p=a.onPause,q=a.onPlay,r=a.onPostSeen,s=a.onPrev,t=a.onPrevReel,u=a.onUpdatePlayPercentage,v=a.onUpdatePreplayPercentage,w=a.post,x=a.preload,y=a.reachedLoggedOutHighlightsLimit,z=a.reelId,A=a.trayEntrypoint;a=a.viewerDimensions;var B=function(){r(z,w.id)},C=j(d("PolarisStoriesContext").StoriesContext),D=C.isMuted,E=C.isPlaybackDisabled,F=C.isTransitioning,G=C.needsTapToStart,H=C.postIDThatShouldShowSensitiveContentOverlay,I=C.updateStoriesContext;C=d("polarisRelationshipSelectors").useRelationship((C=w.ownerId)!=null?C:"");var J=function(){I({isMuted:!D})};c("useGlobalKeyCommands")([d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("stories","toggleSound",function(){J()})],!1,!1);f={autoPlay:f,eventZone:g,isFirstStory:k,isInitialLoad:l,isMuted:D,isPlaybackDisabled:E,isTransitioning:F,onClose:m,onNext:n,onNextReel:o,onPause:p,onPlay:q,onPostSeen:B,onPrev:s,onPrevReel:t,onUpdatePlayPercentage:u,onUpdatePreplayPercentage:v,post:w,preload:x,reelId:z,relationship:C,trayEntrypoint:A,viewerDimensions:a};g=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayBottomBannerInfoFromRootPost(w,!0);l=g&&i.jsx(c("PolarisStoryMediaOverlayInfoFooterCTAContainer.react"),{bannerInfo:g,entityID:w.id});if(!d("PolarisConfig").isLoggedIn()&&b("cr:4998")!=null&&y===!0)return i.jsx(b("cr:4998"),babelHelpers["extends"]({},f));if(G)return i.jsx(c("PolarisStoryTapToPlayOverlay.react"),babelHelpers["extends"]({onShowPostClicked:function(){I({needsTapToStart:!1}),q()}},f));if(H!=null&&w.id===H)return i.jsx(c("PolarisStorySensitivityOverlayContainer.react"),babelHelpers["extends"]({onShowPostClicked:function(){I({postIDThatShouldShowSensitiveContentOverlay:null})}},f));if(h)return i.jsx(c("PolarisStoryExpired.react"),babelHelpers["extends"]({},f,{isPlaybackDisabled:E,isTransitioning:F}));return w.isVideo===!0?i.jsx(c("PolarisStoryVideoPlayer.react"),{isFirstStory:k,mediaRef:e,onNext:n,onNextReel:o,onPrev:s,onPrevReel:t,onUpdatePlayPercentage:u,post:w,reelId:z}):i.jsxs(i.Fragment,{children:[i.jsx(c("PolarisStoryImage.react"),babelHelpers["extends"]({},f,{mediaRef:e})),l]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisSponsoredStoryMediaImpressionSecondChannelLogger",["InstagramAdImpressionSecondChannelFalcoEvent","InstagramAdSubImpressionSecondChannelFalcoEvent","InstagramODS","PolarisContainerModuleUtils","PolarisInteractionsLogger","PolarisSponsoredStoryLoggingConstants","PolarisViewpointActionUtils","cometGHLContentDisplayCheck","cr:6627","qex","setTimeout","usePolarisAnalyticsContext","usePolarisViewer","useScrollBasedImpressionTracker"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qex")._("1229"),i=new Map(),j=new Set();function a(a,e){var f=c("usePolarisAnalyticsContext")(),g=c("usePolarisViewer")(),k=e.id,l=a==null?void 0:a.ad_id,m=a==null?void 0:a.tracking_token,n=d("PolarisContainerModuleUtils").getContainerModule(f);return c("useScrollBasedImpressionTracker")(function(a){if(l!=null&&m!=null&&(g==null?void 0:g.id)!=null&&f!=null){var o=i.get(k),p=Date.now(),q=d("PolarisViewpointActionUtils").getMPKForFeedMedia(e),r={ad_id:l,inventory_source:d("PolarisContainerModuleUtils").getContainerModule(f),m_pk:q,m_t:d("PolarisInteractionsLogger").getMediaTypeFromPost(e).toString(),pigeon_reserved_keyword_module:d("PolarisContainerModuleUtils").getContainerModule(f),pk:g==null?void 0:g.id,tracking_token:m},s=[JSON.stringify({is_sponsored:!0,m_pk:q,trackingToken:m})];if(a.status!=="ENTER")return;if(j.has(k))return;j.add(k);c("setTimeout")(function(){var e=c("cometGHLContentDisplayCheck")(a.target);o==null?e?(c("InstagramODS").incr("web.ads.story.media.impression.second_channel"),c("InstagramAdImpressionSecondChannelFalcoEvent").log(function(){return r}),h===!0&&b("cr:6627")!=null&&b("cr:6627").log(function(){return{container_module:n,event:"impression_second_channel_client",tracking:s}}),i.set(k,p)):c("InstagramODS").incr("web.ads.story.media.impression.second_channel.hidden"):p-o>=d("PolarisSponsoredStoryLoggingConstants").SUB_IMPRESSION_GAP&&(e?(c("InstagramODS").incr("web.ads.story.media.sub_impression.second_channel"),c("InstagramAdSubImpressionSecondChannelFalcoEvent").log(function(){return r}),h===!0&&b("cr:6627")!=null&&b("cr:6627").log(function(){return{container_module:n,event:"sub_impression_second_channel_client",tracking:s}}),i.set(k,p)):c("InstagramODS").incr("web.ads.story.media.sub_impression.second_channel.hidden"));j["delete"](k)},d("PolarisSponsoredStoryLoggingConstants").ADBLOCK_CHECK_DELAY)}})}g["default"]=a}),98);
__d("PolarisSponsoredStoryMedia.react",["PolarisStoryMedia.react","polarisAdsSelectors","qex","react","useMergeRefs","usePolarisSponsoredStoryMediaImpressionLogger","usePolarisSponsoredStoryMediaImpressionSecondChannelLogger","usePolarisSponsoredStoryMediaTimeSpentLogger","usePolarisSponsoredStoryMediaViewabilityLogger","usePolarisSponsoredStoryMediaVpvdImpressionLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=c("qex")._("367");var j=b===!0?c("usePolarisSponsoredStoryMediaImpressionSecondChannelLogger"):function(a,b){return null};function a(a){var b=a.currentReelItemIndex,e=a.post,f=a.reelId,g=d("polarisAdsSelectors").useStoryAdInfo(e.id,function(a){return a}),h=c("usePolarisSponsoredStoryMediaImpressionLogger")(f,e,b),k=j(g,e),l=c("usePolarisSponsoredStoryMediaTimeSpentLogger")(f,e,b,g),m=c("usePolarisSponsoredStoryMediaViewabilityLogger")(f,e,b,g);f=c("usePolarisSponsoredStoryMediaVpvdImpressionLogger")(f,e,b,g);e=c("useMergeRefs")(h,l,k,m,f);return i.jsx(c("PolarisStoryMedia.react"),babelHelpers["extends"]({},a,{adImpressionRef:e}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisReelNotAvailable",["IGRouter","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b){var c=d("IGRouter").useIGHistory(),e=a===!1&&(b===null||(b==null?void 0:(a=b.itemIds)==null?void 0:a.length)===0);i(function(){e&&c.push("/")},[c,e]);return e}g["default"]=a}),98);
__d("usePolarisStoryShareHandler",["PolarisDirectActionShareStory","PolarisReactRedux","Promise","isStringNullOrEmpty","promiseDone","react","usePolarisMQTT"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(a,e,f){var g=d("PolarisReactRedux").useDispatch(),i=c("usePolarisMQTT")();return j(function(j,k){c("promiseDone")((h||(h=b("Promise"))).resolve(g(d("PolarisDirectActionShareStory").shareStory(i,j,a,e,c("isStringNullOrEmpty")(k)?void 0:k))).then(function(){f==null?void 0:f()}))},[g,e,a,i,f])}g["default"]=a}),98);
__d("usePolarisStoriesFooter",["PolarisDirectStrings","PolarisReactRedux","PolarisStoryActions","react","usePolarisStoryShareHandler"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useState;e=3e3;function a(a,b){var e=b.id,f=j(""),g=f[0],h=f[1],k=d("PolarisReactRedux").useDispatch();f=(f=a.owner)==null?void 0:f.id;var l=d("PolarisReactRedux").useSelector(function(a){return a.users.viewerId}),m=a.storyCtaUrl;l=f===l;var n=b.canReshare===!0&&!l&&a.audience!=="MediaAudience.BESTIES";b=b.canReply!=null&&b.canReply&&!l&&m==null;var o="";f!=null&&(o=a.id+"_"+f);a=i(function(){m!=null&&k(d("PolarisStoryActions").openCtaUrl(m))},[k,m]);var p=i(function(){h(d("PolarisDirectStrings").SENT_TOAST_TEXT)},[h]);e=c("usePolarisStoryShareHandler")(e,o,p);return{canReply:b,canReshare:n,ctaUrl:m,handleShareStory:e,isViewingOwnStory:l,mediaId:o,onOpenCta:a,setToastMessage:h,storyOwnerId:f,toastMessage:g}}g.DELAY_BEFORE_CTA_ACTIVE=e;g.usePolarisStoriesFooter=a}),98);
__d("usePolarisStoryLikes",["PolarisConfig","PolarisLogger","PolarisNavigationActions","PolarisReactRedux","PolarisStoriesContext","PolarisStoryActions","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext;function a(a,b){var c=d("PolarisReactRedux").useDispatch(),e=j(d("PolarisStoriesContext").StoriesContext),f=e.updateStoriesContext;e=i(function(){d("PolarisLogger").logAction("loggedOutStoryLikeClick",{source:"StoriesPage"}),c(d("PolarisNavigationActions").openLoggedOutIntentDialog("story_feedback_like",b)),f({isLoggedOutIntentDialogActive:!0,isPaused:!0})},[c,b,f]);var g=i(function(b){b?c(d("PolarisStoryActions").sendStoryLikeAction(a)):c(d("PolarisStoryActions").unsendStoryLikeAction(a))},[c,a]);return d("PolarisConfig").isLoggedIn()?g:e}g["default"]=a}),98);
__d("usePolarisStorySetup",["PolarisReactRedux","PolarisStoriesLoggingUtils","PolarisStoriesProvider.react","nullthrows","polarisGetPostFromGraphMediaInterface","polarisStorySelectors","react","usePolarisEventListener","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect;function a(a,b){var e=d("PolarisStoriesProvider.react").useStoriesContext(),f=e.postIDThatShouldShowSensitiveContentOverlay,g=e.updateStoriesContext,h=d("PolarisReactRedux").useSelector(function(b){return b.stories.currentTrayOrder.indexOf(a.id)}),k=d("PolarisReactRedux").useSelector(function(b){return d("polarisStorySelectors").getInitialReelIndex(b,a.id)}),l=c("nullthrows")(d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getTrayEntrypoint));j(function(){d("PolarisStoriesLoggingUtils").StoriesLoggingSession.start(l,h),d("PolarisStoriesLoggingUtils").StoriesLoggingSession.startNewReel(h,k)},[]);j(function(){return function(){d("PolarisStoriesLoggingUtils").StoriesLoggingSession.clear()}},[]);var m=c("usePrevious")(a.id);j(function(){m!=null&&a.id!=null&&m!==a.id&&d("PolarisStoriesLoggingUtils").StoriesLoggingSession.startNewReel(h,k)},[m,h,k,a.id]);j(function(){var a=d("polarisGetPostFromGraphMediaInterface").getMediaOverlayMediaCoverInfoFromPost(b)!=null;f!==a&&g({postIDThatShouldShowSensitiveContentOverlay:a?b.id:null})},[b,f,g]);j(function(){var a;g({shouldMuteAudio:(a=b.mutingInfo)==null?void 0:a.should_mute_audio,shouldMuteAudioReason:(a=b.mutingInfo)==null?void 0:a.should_mute_audio_reason})},[b,g]);e=i(function(){g({isHidden:document.hidden})},[g]);var n=i(function(){g({hasFocus:document.hasFocus()})},[g]);c("usePolarisEventListener")(document,"visibilitychange",e);c("usePolarisEventListener")(window,"focus",n);c("usePolarisEventListener")(window,"blur",n)}g["default"]=a}),98);
__d("PolarisExclusiveStoryLabel.react",["cx","IGDSBox.react","IGDSText.react","PolarisIGCoreButton","PolarisStoriesStrings","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.onClick;a=a.textSize;a=a==="small"?j.jsx(c("IGDSText.react").Body2Emphasized,{color:"webAlwaysWhite",children:d("PolarisStoriesStrings").EXCLUSIVE_STORY}):j.jsx(c("IGDSText.react").BodyEmphasized,{color:"webAlwaysWhite",children:d("PolarisStoriesStrings").EXCLUSIVE_STORY});return j.jsx(c("PolarisIGCoreButton"),{borderless:!0,onClick:b,children:j.jsx("div",{className:"_ac3m",children:j.jsx(c("IGDSBox.react"),{height:"100%",paddingX:2,paddingY:2,position:"relative",width:"100%",children:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisSharedStoryHeaderInfo.react",["IGDSIconButton.react","IGDSPlayPanoFilledIcon","IGDSWebPauseFilledIcon","PolarisGenericStrings","PolarisVideoConstants","PolarisVideoVolumeControls.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.hidePlayControl,e=a.isMuted,f=a.isPaused,g=a.post,h=a.shouldMuteAudio,j=a.shouldMuteAudioReason,k=a.toggleStoryMuteState,l=a.toggleStoryPauseState,m=g.isVideo===!0&&g.hasAudio===!0&&h!==!0;return i.jsxs(i.Fragment,{children:[!b&&i.jsx(c("IGDSIconButton.react"),{onClick:function(){l()},children:f?i.jsx(c("IGDSPlayPanoFilledIcon"),{alt:d("PolarisGenericStrings").ASSISTIVE_TEXT_PLAY_BUTTON,color:"web-always-white",size:16}):i.jsx(c("IGDSWebPauseFilledIcon"),{alt:d("PolarisGenericStrings").ASSISTIVE_TEXT_PAUSE_BUTTON,color:"web-always-white",size:16})}),i.jsx(c("PolarisVideoVolumeControls.react"),{absolutePositionToast:!1,audioState:m?e?d("PolarisVideoConstants").AUDIO_STATES.off:d("PolarisVideoConstants").AUDIO_STATES.on:d("PolarisVideoConstants").AUDIO_STATES.none,forceMuteReason:j!=null?j:void 0,isStoryVideo:!0,onClick:function(){m&&k()}})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryAppAttribution.react",["cx","PolarisIGCoreButton","PolarisInstagramReelViewerAppAttributionNavFalcoEvent","PolarisNavigationUtils","PolarisReactRedux","PolarisStoryActions","isStringNullOrEmpty","nullthrows","polarisMaybeBuildPlayStoreUrl","polarisStorySelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$2=function(){var a=e.$1();if(a==null)return;e.props.onAttributionClick(e.props.attribution)},e.$3=function(){var a=e.props,b=a.attribution,f=a.containerModule,g=e.$1();c("PolarisInstagramReelViewerAppAttributionNavFalcoEvent").log(function(){return{app_name:b.name,attribution_id:b.id,destination:g||"",pigeon_reserved_keyword_module:f||"unknown"}});d("PolarisNavigationUtils").openExternalURL(c("nullthrows")(g))},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.$1=function(){var a=this.props.attribution,b=a.content_url;a=a.link;if(!c("isStringNullOrEmpty")(b))return b;if(!c("isStringNullOrEmpty")(a)){b=c("polarisMaybeBuildPlayStoreUrl")(a);return(b=b)!=null?b:a}return null};e.render=function(){var a=this.props,b=a.attribution;a=a.isAppAttributionOpen;return j.jsxs("div",{className:"_ac3a",children:[j.jsx(c("PolarisIGCoreButton"),{borderless:!0,color:"web-always-white",onClick:this.$2,children:j.jsxs("div",{className:"_ac3b",children:[j.jsx("img",{alt:"",className:"_ac3c",src:b.app_icon_url}),j.jsx("div",{className:"_ac3d",children:b.app_action_text}),j.jsx("div",{className:"_9znl"})]})}),a&&j.jsxs("div",{className:"_ac3e",children:[j.jsx("div",{className:"_ac3f"}),j.jsx(c("PolarisIGCoreButton"),{borderless:!0,color:"web-always-white",onClick:this.$3,children:j.jsxs("div",{className:"_ac3g",children:["Open ",b.name]})})]})]})};return b}(j.Component);function a(a){return{containerModule:d("polarisStorySelectors").getContainerModuleFromEntrypoint(a.navigation.entrypoint[0]),isAppAttributionOpen:a.stories.isAppAttributionOpen}}function b(a){return{onAttributionClick:function(b){a(d("PolarisStoryActions").openAppAttribution(b))}}}f=d("PolarisReactRedux").connect(a,b)(e);g["default"]=f}),98);
__d("PolarisStoryOptionsButton.react",["fbt","IGDSIconButton.react","IGDSMoreHorizontalFilledIcon","InstagramAdActionMenuFalcoEvent","react","usePolarisSponsoredStoryLoggingParams"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a["data-testid"],d=a.onClick;b=a.post;var e=a.reel;a=c("usePolarisSponsoredStoryLoggingParams")(e,b);var f=a.adId,g=a.containerModule,i=a.mpk,k=a.reelId,l=a.sessionReelCounter,m=a.trackingToken,n=a.traySession,o=a.viewerId,p=a.viewerSession;b=function(){d(),e.isSponsored===!0&&o!=null&&c("InstagramAdActionMenuFalcoEvent").log(function(){return{ad_id:f,is_coming_from:"story",m_pk:i,pigeon_reserved_keyword_module:g,pk:o,reel_id:k,session_reel_counter:l,source_of_action:g,tracking_token:m,tray_session_id:n,viewer_session_id:p}})};return j.jsx("div",{"data-testid":void 0,children:j.jsx(c("IGDSIconButton.react"),{onClick:b,children:j.jsx(c("IGDSMoreHorizontalFilledIcon"),{alt:h._("__JHASH__hJ9WgkS0Nos__JHASH__"),color:"web-always-white",size:24})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryProgressBars.react",["cx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function k(){return j.jsxs("div",{className:"_ac3n","data-testid":void 0,children:[j.jsx("div",{className:"_ac3o"}),j.jsx("div",{className:"_ac3p",style:{width:"100%"}})]})}k.displayName=k.name+" [from "+f.id+"]";function l(){return j.jsx("div",{className:"_ac3n",children:j.jsx("div",{className:"_ac3o"})})}l.displayName=l.name+" [from "+f.id+"]";function m(a){a=a.percentage;return j.jsxs("div",{className:"_ac3n",children:[j.jsx("div",{className:"_ac3o"}),j.jsx("div",{className:"_ac3p _ac3q",style:{width:a+"%"}})]})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.count,c=a.currentIndex,d=a.percentage;return j.jsx("div",{className:"_ac3r",children:Array.from(Array(b).keys()).map(function(a){if(a<c)return j.jsx(k,{},a);else if(a>c)return j.jsx(l,{},a);else return j.jsx(m,{percentage:d},a)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryReplyComposer.react",["cx","IGDSBox.react","IGDSButton.react","Keys","MessengerWebUXLogger","PolarisDirectActionReactToStory","PolarisDirectActionReplyToStory","PolarisDirectStrings","PolarisLikeButton.react","PolarisReactRedux","PolarisStoriesContext","PolarisStoriesLoggingUtils","PolarisStoryActions","PolarisStoryReplyReaction.react","PolarisStoryStrings","PolarisUA","ReactTextareaAutosizeWWWIG","WAArmadilloXMA.pb","cr:6502","emptyFunction","getTextDirection","isThreadLevelCutoverEnabled","nullthrows","polarisUserSelectors","qex","react","usePolarisDisplayProperties","usePrevious","uuidv4"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useMemo,o=e.useRef,p=e.useState,q=(h=b("cr:6502"))!=null?h:function(a){return c("emptyFunction")};function a(a){var b,e=a.handleStoryLike,f=a.likedByViewer,g=a.mediaId,h=a.onSendMessage,i=a.post,r=a.reelId,s=a.shareButton,t=a.storyOwnerId;a=a.supportsReelReactions;var u=l(d("PolarisStoriesContext").StoriesContext),v=u.isKeyboardActive,w=u.updateStoriesContext,x=o(null);u=p("");var y=u[0],z=u[1];u=p(!0);var A=u[0],B=u[1];u=c("usePolarisDisplayProperties")();var C=u.orientation,D=u.viewportHeight,E=u.viewportWidth,F=c("usePrevious")(C),G=c("usePrevious")(D),H=c("usePrevious")(E),I=d("PolarisUA").isDesktop()?300:0;u=d("PolarisReactRedux").useSelector(function(a){return d("polarisUserSelectors").getUserById(a,t)});u=u.username;var J=d("polarisUserSelectors").useUser((b=i.owner)==null?void 0:b.id),K=c("MessengerWebUXLogger")==null?void 0:c("MessengerWebUXLogger").useInteractionLogger(),L=n(function(){return c("uuidv4")()},[]),M=d("PolarisReactRedux").useDispatch();b=d("PolarisUA").isDesktop()?d("PolarisStoryStrings").directReplyPlaceholder(c("nullthrows")(u)):d("PolarisDirectStrings").SEND_MESSAGE_STRING_V2;var N=q(),O=k(function(){var a;if(A)return;M(d("PolarisStoryActions").logStoriesSendDismissMessage(!0));c("isThreadLevelCutoverEnabled")()?N(M,i,J,y,t,r,g,d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY):M(d("PolarisDirectActionReplyToStory").replyToStory(t,r,g,y));K==null?void 0:K({eventName:"igd_story_reply_message_sent",extraData:{isReaction:"false",recipientID:(a=J==null?void 0:J.interopMessagingUserFbid)!=null?a:t,shareType:"ig_story_reply"},flowInstanceId:L});h&&h(y);w({isKeyboardActive:!1});z("");B(!0);x&&x.current!=null&&x.current.blur()},[A,M,K,t,L,h,w,N,i,J,y,r,g]);u=k(function(a){a=a.target.value;z(a);B(a.replace(/\s/g,"").length===0)},[]);var P=k(function(a){d("PolarisUA").isDesktop()&&a.which===c("Keys").RETURN&&!a.shiftKey&&(a.preventDefault(),O())},[O]),Q=k(function(a){d("PolarisUA").isDesktop()&&(a.which===c("Keys").LEFT||a.which===c("Keys").RIGHT)&&(a.preventDefault(),a.stopPropagation())},[]),R=k(function(){c("qex")._("479")&&(window.scrollTo(0,0),document.body&&(document.body.scrollTop=0)),w({isKeyboardActive:!0}),K==null?void 0:K({eventName:"igd_story_reply_focus_composer",extraData:{shareType:"ig_story_reply"},flowInstanceId:L}),d("PolarisStoriesLoggingUtils").StoriesLoggingSession.startPauseTimer(),M(d("PolarisStoryActions").logOpenStoriesComposer())},[M,L,K,w]),S=k(function(){v&&M(d("PolarisStoryActions").logStoriesSendDismissMessage(!1)),d("PolarisStoriesLoggingUtils").StoriesLoggingSession.stopPauseTimer(),window.setTimeout(function(){return w({isKeyboardActive:!1})},I)},[M,v,w,I]);(x==null||x.current==null)&&w({replyInputTextAreaRef:x});m(function(){G!=null&&F===C&&H===E&&G<D&&x&&x.current!=null&&document.activeElement===x.current&&x.current.blur()},[x,w,C,F,G,H,D,E]);var T=k(function(a){h(a),M(d("PolarisStoryActions").logStoriesSendReaction()),c("isThreadLevelCutoverEnabled")()?N(M,i,J,a,t,r,g,d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION):M(d("PolarisDirectActionReactToStory").reactToStory(t,r,g,a))},[M,g,h,i,r,N,t,J]);a=y.length===0&&v&&a;var U=c("getTextDirection")(y);return j.jsxs(j.Fragment,{children:[v&&j.jsx("div",{className:"_abx3"}),a&&j.jsx(c("PolarisStoryReplyReaction.react"),{flowInstanceId:L,onReactToStory:T}),j.jsxs(c("IGDSBox.react"),{direction:"row",position:"relative",children:[j.jsxs("div",{className:"_abx0"+(d("PolarisUA").isDesktop()?" _abx1":""),children:[j.jsx(c("IGDSBox.react"),{flex:"grow",marginEnd:1,position:"relative",children:j.jsx(c("ReactTextareaAutosizeWWWIG"),{className:"_abx2",dir:U,disabled:!1,maxRows:5,onBlur:S,onChange:u,onFocus:R,onKeyDown:P,onKeyUp:Q,placeholder:b,ref:x,value:y})}),A?null:j.jsx(c("IGDSBox.react"),{marginEnd:2,position:"relative",children:j.jsx(c("IGDSButton.react"),{display:"block",label:d("PolarisDirectStrings").SEND_BUTTON_STRING,onClick:O,variant:"white_link"})})]}),v?null:j.jsx("div",{className:"_abx4",children:j.jsx(c("PolarisLikeButton.react"),{color:"ig-stroke-on-media",isLiked:f,onChange:e})}),v?null:s]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryShareButtonInner.react",["IGDSDirectPanoOutlineIcon","PolarisConfig","PolarisDirectStrings","PolarisIGCoreSVGIconButton","PolarisLogger","PolarisStoriesContext","emptyFunction","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));a=h;var j=a.useCallback,k=a.useContext;function l(a){a=a.color;return i.jsx(c("IGDSDirectPanoOutlineIcon"),{alt:d("PolarisDirectStrings").DIRECT_BUTTON_ALT_TEXT,color:a,size:24})}l.displayName=l.name+" [from "+f.id+"]";b=i.forwardRef(function(a,b){var e=a.shouldHaveSharingFriction,f=e===void 0?!1:e;e=a.onClick;var g=e===void 0?c("emptyFunction"):e;a=k(d("PolarisStoriesContext").StoriesContext);var h=a.shareClickCount,m=a.updateStoriesContext;e=j(function(){d("PolarisLogger").logAction("loggedOutStoryShareClick",{source:"StoriesPage"}),m({isLoggedOutStoryShareSheetActive:!0,isPaused:!0})},[m]);a=j(function(){g==null?void 0:g();if(f){m({isPlaybackDisabled:!0,shareClickCount:h+1});return}m({isStoryShareSheetActive:!0})},[g,h,f,m]);return i.jsx(c("PolarisIGCoreSVGIconButton"),{"data-testid":void 0,hover:c("gkx")("7593")?i.jsx(l,{color:"ig-secondary-icon"}):void 0,onClick:d("PolarisConfig").isLoggedIn()?a:e,ref:b,children:i.jsx(l,{color:"ig-stroke-on-media"})})});e=b;g["default"]=e}),98);
__d("PolarisStoryShareButtonWithDialog.react",["cx","JSResourceForInteraction","PolarisReactRedux","PolarisStoriesContext","PolarisStoryShareButtonInner.react","polarisStorySelectors","polarisUserSelectors","react","usePolarisSelector","usePolarisSponsoredStoryLoggingParams","usePolarisStoryOpenShareDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useContext,m=c("JSResourceForInteraction")("IGDSecureShareSheetDialog.react").__setRef("PolarisStoryShareButtonWithDialog.react");function a(a){var b=a.currentPost;a.handleShareStory;var e=a.reelId;a.referrer;a=l(d("PolarisStoriesContext").StoriesContext);var f=a.updateStoriesContext,g=(a=(a=b.owner)==null?void 0:a.id)!=null?a:"";a=d("PolarisReactRedux").useSelector(function(a){return d("polarisUserSelectors").maybeGetUserById(a,g)});var h=b;if(a!==null&&b.owner){var i=b.owner,n=i.profilePictureUrl;i=i.username;(i==null||n==null)&&h.owner&&(h.owner.username=a.username,h.owner.profilePictureUrl=a.profilePictureUrl)}i=k(function(){f({isStoryShareSheetActive:!1})},[f]);n=c("usePolarisSelector")(function(a){return d("polarisStorySelectors").getReel(a,e)});a=c("usePolarisSponsoredStoryLoggingParams")(n,h);n=a.adId;var o=a.adInsertedPosition,p=a.containerModule,q=a.followStatus,r=a.mediaType,s=a.mpk,t=a.trackingToken,u=a.traySession,v=a.viewerId;a=a.viewerSession;var w=void 0;n!=null&&g!=null&&q!=null&&s!=null&&t!=null&&v!=null&&r!=null&&(w={a_pk:g,ad_id:n,ad_inserted_position:o,follow_status:q,m_pk:s,m_t:r,reel_id:e,source_of_action:p,tracking_token:t,tray_session_id:u,viewer_session_id:a});v=c("usePolarisStoryOpenShareDialog")({adsStoryLoggingData:w,dialogResource:m,onClose:i,post:h,reelId:e});return j.jsx("div",{className:"_ac3h",children:j.jsx(c("PolarisStoryShareButtonInner.react"),{onClick:v,shouldHaveSharingFriction:b==null?void 0:(n=b.sharingFrictionInfo)==null?void 0:n.shouldHaveSharingFriction})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryVideoContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;var j=c.useContext,k=c.useRef,l={loggerValuesRef:{current:{initialShouldStarted:!0,initialStartedPlaying:!0,lastShouldStartTime:0,lastStartPosition:0,loggingSequenceNumber:1}},ref:{current:null}},m=i.createContext(l);function a(){return j(m)}function b(a){a=a.children;var b=k(l.ref.current),c=k(l.loggerValuesRef.current);return i.jsx(m.Provider,{value:{loggerValuesRef:c,ref:b},children:a})}b.displayName=b.name+" [from "+f.id+"]";g.StoryVideoContext=m;g.useStoryVideoContext=a;g.StoryVideoContextProvider=b}),98);
__d("PolarisStoryViewerButton.react",["cx","fbt","IGDSBox.react","PolarisBigNumber.react","PolarisFacepile.react","PolarisIGCoreButton","PolarisReactRedux","PolarisStoriesProvider.react","polarisStorySelectors","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useCallback,m=3;function a(){var a=d("PolarisStoriesProvider.react").useStoriesContext(),b=a.updateStoriesContext;a=l(function(){b({isStoryViewerListActive:!0})},[b]);var e=d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getCurrentPost);if(e==null)return null;var f=e.storyViewCount;e=e.storyViewers;e=e?e.slice(0,m).map(function(a){return a.user.id}):[];if(f==null||f<=0||e==null)return null;f=Math.floor(f);return k.jsx("div",{className:"_ac5m",children:k.jsx(c("PolarisIGCoreButton"),{borderless:!0,onClick:a,children:e!=null?k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"column",position:"relative",children:[k.jsx(c("IGDSBox.react"),{marginBottom:1,position:"relative",children:k.jsx(c("PolarisFacepile.react"),{border:"transparent",overlapDirection:"left",userIds:e})}),k.jsx("span",{className:"_ac5n",children:i._("__JHASH__YCjKhwWmGaT__JHASH__",[i._param("count",k.jsx(c("PolarisBigNumber.react"),{value:f}))])})]}):k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",position:"relative",children:[k.jsx(c("IGDSBox.react"),{marginEnd:2,position:"relative",children:k.jsx("span",{className:"_ac5o _9_4d"})}),k.jsx("span",{className:"_ac5p",children:k.jsx(c("PolarisBigNumber.react"),{value:f})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoryViewerToast.react",["PolarisIGCoreToast","PolarisToastConstants","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=d("PolarisToastConstants").TOAST_ANIM_DURATION_S*1e3;function a(a){var b=a.message;a=a.onClose;return b===""?null:i.jsx(c("PolarisIGCoreToast"),{duration:j,onClose:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisStoriesHeaderOwnerV2.react",["cx","$InternalEnum","IGDSBox.react","IGDSVerifiedIcon","PolarisEligibleForCommissionUnit.react","PolarisGroupProfileAvatar.react","PolarisGroupProfileUtils","PolarisHashtagLink.react","PolarisLocationAvatar.react","PolarisLocationLink.react","PolarisSponsoredLabel.react","PolarisSponsorsUnit.react","PolarisStoriesImmersiveReshareAttribution.react","PolarisStoryAppAttribution.react","PolarisTagAvatar.react","PolarisTimestamp.react","PolarisTrackingNodeProvider.react","PolarisTransparencyLabel.react","PolarisTransparencyUtils","PolarisUserAvatar.react","PolarisUserLink.react","nullthrows","polarisAdsSelectors","polarisUnexpected","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=b("$InternalEnum").Mirrored(["PaidPartnership","Affiliate","ImmersiveReshare"]),l={whiteText:{color:"xh93fs4",$$css:!0}};function m(a){var b=a.appAttribution,e=a.isAffiliate,f=a.isPaidPartnership,g=a.postAuthor,h=a.postedAt,i=a.postId,m=a.reel,n=a.reelOwner,o=a.resharedStoryMediaAuthor,p=a.sponsors;p=p===void 0?null:p;a=a.title;i=d("polarisAdsSelectors").useStoryAdInfo(i,function(a){return a});var q=null;f?q=k.PaidPartnership:e?q=k.Affiliate:o!=null&&(q=k.ImmersiveReshare);return j.jsxs("div",{className:"_ac0o",children:[j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:69,children:j.jsx("div",{children:d("PolarisGroupProfileUtils").getIsUserGroupProfile(n)===!0?j.jsx(c("PolarisGroupProfileAvatar.react"),{groupProfile:n,postAuthor:g}):j.jsx(c("PolarisUserAvatar.react"),{className:"_ac0p",profilePictureUrl:c("nullthrows")(n.profilePictureUrl),size:32,username:n.username})})}),j.jsxs(c("IGDSBox.react"),{alignItems:"start",direction:"column",marginStart:2,position:"relative",children:[j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",position:"relative",children:[j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:10,children:j.jsx("div",{children:j.jsx(c("PolarisUserLink.react"),{className:"_ac0s",username:c("nullthrows")(n.username),children:a})})}),g.isVerified===!0?j.jsx(c("IGDSBox.react"),{marginStart:1,position:"relative",children:j.jsx(c("IGDSVerifiedIcon"),{alt:"",color:"web-always-white",size:12})}):null,m.isSponsored!==!0&&j.jsx(c("IGDSBox.react"),{marginStart:2,position:"relative",children:j.jsx(c("PolarisTimestamp.react"),{className:"_ac0t",isLong:!1,value:h})})]}),d("PolarisTransparencyUtils").shouldShowTransparencyLabel(n)&&j.jsx(c("PolarisTransparencyLabel.react"),{className:"_ac0u _ac0s",mediaId:m.id,screen:"stories",user:n}),(i==null?void 0:i.label)!=null&&j.jsx(c("PolarisSponsoredLabel.react"),{label:i==null?void 0:i.label,xstyle:l.whiteText}),q===k.PaidPartnership&&j.jsx(c("PolarisSponsorsUnit.react"),{color:"white",sponsors:p||[]}),q===k.Affiliate&&j.jsx(c("PolarisEligibleForCommissionUnit.react"),{className:"_ac0s"}),q===k.ImmersiveReshare&&o!=null&&j.jsx(c("PolarisStoriesImmersiveReshareAttribution.react"),{profilePicUrl:(f=o.profile_pic_url)!=null?f:"",username:(e=o.username)!=null?e:""}),b&&j.jsx(c("PolarisStoryAppAttribution.react"),{attribution:b}),d("PolarisGroupProfileUtils").getIsUserGroupProfile(n)===!0&&g.username!=null&&j.jsx(c("PolarisUserLink.react"),{className:"_ac0w _ac0s",username:c("nullthrows")(g.username),children:d("PolarisGroupProfileUtils").getGroupMediaPostAuthorAttributionText(c("nullthrows")(g.username))})]})]})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=a.postAuthor,d=a.postedAt,e=a.reel;a=a.reelOwner;return j.jsxs("div",{className:"_ac0o",children:[j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:69,children:j.jsxs("div",{children:[e.ownerType==="GraphHashTag"&&j.jsx(c("PolarisTagAvatar.react"),{profilePictureUrl:c("nullthrows")(a.profilePictureUrl),size:30,tagName:c("nullthrows")(e.tagName)}),e.ownerType==="GraphLocation"&&j.jsx(c("PolarisLocationAvatar.react"),{locationId:c("nullthrows")(e.locationId),profilePictureUrl:c("nullthrows")(a.profilePictureUrl),size:30})]})}),j.jsxs(c("IGDSBox.react"),{alignItems:"start",direction:"column",marginStart:2,position:"relative",children:[j.jsxs("div",{className:"_ac0q",children:[e.ownerType==="GraphHashTag"&&j.jsx(c("PolarisHashtagLink.react"),{className:"_ac0v _ac0s",tag:c("nullthrows")(e.tagName)}),e.ownerType==="GraphLocation"&&j.jsx(c("PolarisLocationLink.react"),{className:"_ac0v _ac0s",location:a}),j.jsx(c("IGDSBox.react"),{marginStart:2,position:"relative",children:j.jsx(c("PolarisTimestamp.react"),{className:"_ac0t",isLong:!1,value:d})})]}),j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:10,children:j.jsx("div",{children:j.jsx(c("PolarisUserLink.react"),{className:"_ac0w _ac0s",username:c("nullthrows")(b.username),children:c("nullthrows")(b.username)})})})]})]})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.appAttribution,d=a.isAffiliate,e=a.isPaidPartnership,f=a.postAuthor,g=a.postedAt,h=a.postId,i=a.reel,k=a.reelOwner,l=a.resharedStoryMediaAuthor,o=a.sponsors,p=a.title;a.audience;a.trayEntrypoint;switch(i.ownerType){case"GraphUser":return j.jsx(m,{appAttribution:b,isAffiliate:d,isPaidPartnership:e,postAuthor:f,postedAt:g,postId:h,reel:i,reelOwner:k,resharedStoryMediaAuthor:l,sponsors:o,title:p});case"GraphLocation":case"GraphHashTag":return j.jsx(n,{postAuthor:f,postedAt:g,reel:i,reelOwner:k})}c("polarisUnexpected")("Owner type must be User or Hashtag");return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisUpdateStorySeen",["PolarisReactRedux","PolarisStoryActions","PolarisStorySeenStateContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=d("PolarisReactRedux").useDispatch(),b=d("PolarisStorySeenStateContext").usePolarisStorySeenStateManager();return i(function(c,e){b!=null?a(d("PolarisStoryActions").updateReelSeen(c,e,b)):a(d("PolarisStoryActions").updateReelSeen(c,e))},[a,b])}g["default"]=a}),98);
__d("PolarisStoriesMediaRoot.react",["PolarisConfig","PolarisLinkBuilder","PolarisReactRedux","PolarisStoriesComponent.react","PolarisStoryActions","nullthrows","polarisStorySelectors","promiseDone","react","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){a=a.props;var b=a.routeParams,e=b.initial_media_id;b=b.username;a=a.routeProps;var f=a.show_qr_modal,g=a.user,h=d("PolarisReactRedux").useDispatch();a=k(!1);var l=a[0],m=a[1];a=d("PolarisConfig").isLoggedIn();var n=c("usePolarisSelector")(function(a){return d("polarisStorySelectors").getTrayEntrypoint(a)});n=n==="story_ad_activity";if(!a&&b!=null){var o=d("PolarisLinkBuilder").buildUserStoryLink(b);h(d("PolarisStoryActions").initStoryAuth(o))}o=d("PolarisReactRedux").useSelector(d("polarisStorySelectors").getCurrentStoryPosition);var p=n?o==null?void 0:o.reelId:g.id;n=c("usePolarisSelector")(function(a){return d("polarisStorySelectors").getReel(a,c("nullthrows")(p))});var q=!n||n.itemIds==null||o==null;j(function(){!l&&q&&c("promiseDone")(h(d("PolarisStoryActions").initStoryPage({initialMediaId:e,owner:g})).then(function(){m(!0)}))},[q,h,e,l,g]);return i.jsx(c("PolarisStoriesComponent.react"),{initializing:q&&l===!1,showQRModal:f,username:b,viewerIsLoggedIn:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);